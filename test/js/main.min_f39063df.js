var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(n,r){function s(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a["throw"](e))}catch(t){r(t)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,o)}l((a=a.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return a([e,t])}}function a(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(a){i=[6,a],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,o,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},LauncherLogicBase=function(){function e(e){this._freq=50,this._run_delay=0,this._ticker=0,this._launcher=e,this._timer=new egret.Timer(50),this._timer.addEventListener(egret.TimerEvent.TIMER,this.update,this)}return e.prototype.setFreq=function(e){return this._freq=e,this},e.prototype.setDelay=function(e){return this._run_delay=e,this},e.prototype.getLauncher=function(){return this._launcher},e.prototype.start=function(){this._run_delay>0?(this._delay_timer=new egret.Timer(50,this._run_delay/50),this._delay_timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.run,this),this._delay_timer.start()):this.run()},e.prototype.run=function(){this._timer.start(),this._delay_timer=null},e.prototype.resume=function(){this._run_delay>0&&null!=this._delay_timer?this._delay_timer.start():this.run()},e.prototype.pause=function(){null!=this._timer&&this._timer.stop(),null!=this._delay_timer&&this._delay_timer.stop()},e.prototype.reset=function(){this.pause(),this._ticker=0},e.prototype.update=function(e){this._ticker>=this._freq&&(this._ticker-=this._freq,this.onUpdate(e)),this._ticker+=50},e}();__reflect(LauncherLogicBase.prototype,"LauncherLogicBase");var PageBase=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.width=Main.X,this.height=Main.Y,this.doRender()},t.prototype.onRemove=function(e){this.removeChildren()},t}(egret.Sprite);__reflect(PageBase.prototype,"PageBase");var ShotLogicBase=function(e){function t(t,i){var a=e.call(this,t)||this;return a._missile_prototype=i,a}return __extends(t,e),t.prototype.createMissile=function(){return this._missile_prototype.clone().setPos(this._launcher.getPos())},t}(LauncherLogicBase);__reflect(ShotLogicBase.prototype,"ShotLogicBase");var StageBase=function(e){function t(t,i){var a=e.call(this)||this;return a.containers=new Array,a.title="标题还没初始化",a.help_text="帮助文本还没初始化",a.front_stage=null,a.next_stage=null,a._isTouching=!1,a._touch_distance=new egret.Point,a._uniqueStageID=t,a._total_time=i,StageData.registerStage(a),a.addEventListener(MissileEvent.TICK,MissileBase.tickLogic,a),a.addEventListener(MissileEvent.EDGE,MissileBase.edgeLogic,a),a}return __extends(t,e),t.prototype.addChildAtLayer=function(e,t){this.containers[t].addChild(e)},t.prototype.getUniqueID=function(){return this._uniqueStageID},t.prototype.getCurrentTick=function(){return Math.max(this._current_tick,0)},t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t),this._current_tick=-60,this.state=StageState.BEFORE_RUNNING,this.arrayMissile=new Array,this.arrayLauncher=new Array,this._tick_timer=new egret.Timer(50),this._tick_timer.addEventListener(egret.TimerEvent.TIMER,this.onTickUpdate,this),this._tick_timer.start(),this._missile_timer=new egret.Timer(50,0),this._missile_timer.addEventListener(egret.TimerEvent.TIMER,this.onMissileUpdate,this),SelfMachine.INSTANCE.currentStage=this,this.addChildAtLayer(SelfMachine.INSTANCE,DrawingLayer.SELF_MACHINE),this.initEmitters()},t.prototype.doRender=function(){for(var e=0;6>=e;e++)this.containers[e]=new egret.Sprite,this.addChildAt(this.containers[e],e);var i=MyUtils.createBitmapByName(TextureNames.GAME_SKY);i.width=Main.X,i.height=Main.Y,i.alpha=1,this.addChildAtLayer(i,DrawingLayer.BACKGROUND),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this);var a=new egret.Shape;a.x=0,a.y=0,a.graphics.beginFill(16777215,.1),a.graphics.drawRect(0,0,Main.X,Main.UPPER_Y),a.graphics.endFill(),this.addChildAtLayer(a,DrawingLayer.CONTROL),this._titleText=new egret.TextField,this._titleText.width=1080,this._titleText.height=120,this._titleText.x=0,this._titleText.y=0,this._titleText.size=72,this._titleText.text=this.title,this._titleText.textColor=0,this._titleText.fontFamily="KaiTi",this._titleText.textAlign=egret.HorizontalAlign.CENTER,this._titleText.verticalAlign=egret.VerticalAlign.BOTTOM,this.addChildAtLayer(this._titleText,DrawingLayer.CONTROL),this._timeText=new egret.TextField,this._timeText.width=360,this._timeText.height=120,this._timeText.x=360,this._timeText.y=120,this._timeText.size=48,this._timeText.text="3",this._timeText.textColor=0,this._timeText.textAlign=egret.HorizontalAlign.CENTER,this._timeText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChildAtLayer(this._timeText,DrawingLayer.CONTROL);var n=new egret.Shape;n.x=0,n.y=Main.BELOW_Y,n.graphics.beginFill(16777215,1),n.graphics.drawRect(0,0,Main.X,Main.Y-Main.BELOW_Y),n.graphics.endFill(),this.addChildAtLayer(n,DrawingLayer.CONTROL);var r=new Button(180,180,new egret.Point(180,1800)).setTexture(TextureNames.BUTTON_PAUSE);r.setAction(t.click_pause),this.addChildAtLayer(r,DrawingLayer.CONTROL);var s=new Button(180,180,new egret.Point(420,1800)).setTexture(TextureNames.BUTTON_RESTART);s.setAction(t.click_restart),this.addChildAtLayer(s,DrawingLayer.CONTROL);var o=new Button(180,180,new egret.Point(660,1800)).setTexture(TextureNames.BUTTON_RETURN);o.setAction(t.click_return),this.addChildAtLayer(o,DrawingLayer.CONTROL);var l=new Button(180,180,new egret.Point(900,1800)).setTexture(TextureNames.BUTTON_INFO);l.setAction(t.click_info),this.addChildAtLayer(l,DrawingLayer.CONTROL)},t.prototype.mouseDown=function(e){this._isTouching=!0,this._touch_distance.x=e.stageX-SelfMachine.INSTANCE.getX(),this._touch_distance.y=e.stageY-SelfMachine.INSTANCE.getY(),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.mouseMove=function(e){if(null!=SelfMachine.INSTANCE.currentStage&&void 0!=SelfMachine.INSTANCE.currentStage&&(SelfMachine.INSTANCE.currentStage.state==StageState.BEFORE_RUNNING||SelfMachine.INSTANCE.currentStage.state==StageState.RUNNING)&&this._isTouching){var t=e.stageX-this._touch_distance.x;t=Math.max(t,SelfMachine.SIZE),t=Math.min(t,Main.X-SelfMachine.SIZE);var i=e.stageY-this._touch_distance.y;i=Math.max(i,Main.UPPER_Y+SelfMachine.SIZE),i=Math.min(i,Main.BELOW_Y-SelfMachine.SIZE),SelfMachine.INSTANCE.setPos(new egret.Point(t,i))}},t.prototype.mouseUp=function(e){this._isTouching=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.onTickUpdate=function(e){this._current_tick++,this._current_tick<0?this._timeText.text=Math.floor(-this._current_tick/20+.95)+"":0==this._current_tick?(this._timeText.text=this._total_time+"",this.start()):(this._timeText.text=Math.floor(this._total_time-this._current_tick/20+.95)+"",this._current_tick>=20*this._total_time&&this.win())},t.prototype.onMissileUpdate=function(e){for(var t=0,i=this.arrayMissile.slice(0);t<i.length;t++){var a=i[t];if(a.onUpdate(e),a.hasSpecialLogic(TickEventHandler)){var n=new MissileTickEvent(a);this.dispatchEvent(n)}}if(!SelfMachine.INSTANCE.UNDEAD){for(var r=0,s=SelfMachine.INSTANCE.currentStage.arrayMissile;r<s.length;r++){var a=s[r];if(a.isCollide()){this.dead();break}}e.updateAfterEvent()}},t.prototype.win=function(){LocalData.setStageData(this,STAGE_DATA.FINISHED),this.state=StageState.END;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.pause()}this._tick_timer.stop(),this._missile_timer.stop(),this.addChildAtLayer(Win.INSTANCE,DrawingLayer.POPUP)},t.prototype.start=function(){this.state=StageState.RUNNING;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.start()}this._missile_timer.start()},t.prototype.pause=function(){this.state=StageState.PAUSING;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.pause()}this._tick_timer.stop(),this._missile_timer.stop()},t.prototype.resume=function(){this.state=StageState.RUNNING;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.resume()}this._tick_timer.start(),this._missile_timer.start()},t.prototype.restart=function(){this.state=StageState.BEFORE_RUNNING;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.reset()}MyUtils.cleanMissile(this),this._tick_timer.stop(),this._current_tick=-60,this._timeText.text="3",this._tick_timer.start()},t.prototype.end=function(){this.state=StageState.END,this._tick_timer.stop(),this._missile_timer.stop(),MyUtils.cleanMissile(this),MyUtils.cleanController(this),this.removeChildren()},t.prototype.dead=function(){this.state=StageState.END;for(var e=0,t=this.arrayLauncher;e<t.length;e++){var i=t[e];i.pause()}this._tick_timer.stop(),this._missile_timer.stop(),this.addChildAtLayer(Dead.INSTANCE,DrawingLayer.POPUP)},t.click_pause=function(e){var t=SelfMachine.INSTANCE.currentStage;t.state==StageState.RUNNING&&(t.pause(),t.addChildAtLayer(Pause.INSTANCE,DrawingLayer.POPUP))},t.click_return=function(e){var t=SelfMachine.INSTANCE.currentStage;t.end(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_restart=function(e){var t=SelfMachine.INSTANCE.currentStage;t.restart()},t.click_info=function(e){var t=SelfMachine.INSTANCE.currentStage;t.state==StageState.RUNNING&&(t.pause(),t.addChildAtLayer(Info.INSTANCE,DrawingLayer.POPUP))},t}(PageBase);__reflect(StageBase.prototype,"StageBase");var StageState;!function(e){e[e.BEFORE_RUNNING=0]="BEFORE_RUNNING",e[e.RUNNING=1]="RUNNING",e[e.PAUSING=2]="PAUSING",e[e.END=3]="END"}(StageState||(StageState={}));var DrawingLayer;!function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.EMITTER=1]="EMITTER",e[e.BOTTOM_MISSILE=2]="BOTTOM_MISSILE",e[e.SELF_MACHINE=3]="SELF_MACHINE",e[e.UPPER_MISSILE=4]="UPPER_MISSILE",e[e.CONTROL=5]="CONTROL",e[e.POPUP=6]="POPUP"}(DrawingLayer||(DrawingLayer={}));var MissileEventHandler=function(){function e(e){this.triggerTimes=-99,this._func=e}return e.prototype.trigger=function(e){this.shouldTrigger(e)&&(this._func(e),this.triggerTimes>0&&this.triggerTimes--)},e.prototype.setTriggerTimes=function(e){return this.triggerTimes=e,this},e}();__reflect(MissileEventHandler.prototype,"MissileEventHandler");var Scatter=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a._ang=0,a._step=45,a._num=5,a}return __extends(t,e),t.prototype.setStartAngle=function(e){return this._ang=e,this},t.prototype.setStep=function(e){return this._step=e,this},t.prototype.setNumber=function(e){return this._num=e,this},t.prototype.onUpdate=function(e){for(var t=this._ang,i=0;i++<this._num;){var a=this.createMissile(),n=MyUtils.ang2rad(t),r=a.getVelocity();a.setVelocity(r*Math.cos(n),r*Math.sin(n)),a.addToStage(),t+=this._step}},t}(ShotLogicBase);__reflect(Scatter.prototype,"Scatter");var StageTutorial=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.tutorial_text="",a}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t),this.pause(),MsgBox.setCustomAction(function(){SelfMachine.INSTANCE.currentStage.restart()}),MsgBox.showMsgBox(this,this.tutorial_text)},t}(StageBase);__reflect(StageTutorial.prototype,"StageTutorial");var Button=function(e){function t(t,i,a){var n=e.call(this)||this;return n._texture=TextureNames.BUTTON_NORMAL,n._width=t,n._height=i,n._pos=a,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemove,n),n}return __extends(t,e),t.prototype.setAction=function(e){this._action=e},t.prototype.setTexture=function(e){return this._texture=e,this},t.prototype.onAddToStage=function(e){this.doRender(),this.img.touchEnabled=!0,this.img.addEventListener(egret.TouchEvent.TOUCH_TAP,this._action,this)},t.prototype.doRender=function(){this.img=MyUtils.createBitmapByName(this._texture),this.img.width=this._width,this.img.height=this._height,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2,this.img.x=this._pos.x,this.img.y=this._pos.y,this.addChild(this.img)},t.prototype.onRemove=function(e){this.removeChildren()},t}(egret.Sprite);__reflect(Button.prototype,"Button");var Popup=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){this._shape=new egret.Shape,this._shape.x=0,this._shape.y=0,this._shape.graphics.beginFill(8355711,.5),this._shape.graphics.drawRect(0,0,Main.X,Main.Y),this._shape.graphics.endFill(),this._shape.touchEnabled=!0,this.addChild(this._shape)},t}(PageBase);__reflect(Popup.prototype,"Popup");var MissileBase=function(){function e(){this._missile_width=24,this._missile_height=24,this._texture=TextureNames.MISSILE_STANDARD,this._posX=0,this._posY=0,this._vx=0,this._vy=0,this.ignoreCollideCheck=!1,this._handler=[],this.isBottomLayer=!1,this._life=0}return e.prototype.setSize=function(e,t){return this._missile_width=e,this._missile_height=t,this},e.prototype.resize=function(e,t){return this._missile_width=e,this._missile_height=t,this.img.width=e,this.img.height=t,this.img.anchorOffsetX=e/2,this.img.anchorOffsetY=t/2,this},e.prototype.rotate=function(e){this.img.rotation+=e},e.prototype.getWidth=function(){return this._missile_width},e.prototype.getHeight=function(){return this._missile_height},e.prototype.addHandler=function(e){return this._handler.push(e),this},e.prototype.removeHandler=function(e){return MyUtils.removeObjectFromArray(e,this._handler)},e.prototype.setTexture=function(e){return this._texture=e,null!=this.img&&(this.img.texture=RES.getRes(e)),this},e.prototype.setPos=function(e){return this._posX=e.x,this._posY=e.y,this},e.prototype.setPosX=function(e){return this._posX=e,this},e.prototype.setPosY=function(e){return this._posY=e,this},e.prototype.setVelocity=function(e,t){return this._vx=e,this._vy=t,this},e.prototype.setVelocityX=function(e){return this._vx=e,this},e.prototype.setVelocityY=function(e){return this._vy=e,this},e.prototype.addVelocity=function(e,t){return this._vx+=e,this._vy+=t,this},e.prototype.setTotalVelocity=function(e){var t=this.getVelocity();return 0>=t?(this._vx=0,this._vy=e):(this._vx=e*this._vx/t,this._vy=e*this._vy/t),this},e.prototype.getVelocity=function(){return Math.sqrt(this._vx*this._vx+this._vy*this._vy)},e.prototype.getVelocityX=function(){return this._vx},e.prototype.getVelocityY=function(){return this._vy},e.prototype.getDirection=function(){return 0==this._vx?this._vy>=0?Math.PI/2:-Math.PI/2:this._vx>0?Math.atan(this._vy/this._vx):Math.atan(this._vy/this._vx)+Math.PI},e.prototype.getTexture=function(){return this._texture},e.prototype.getLife=function(){return this._life},e.prototype.addToStage=function(){var e=SelfMachine.INSTANCE.currentStage,t=this.isBottomLayer?DrawingLayer.BOTTOM_MISSILE:DrawingLayer.UPPER_MISSILE;this.initIMG(),e.addChildAtLayer(this.img,t),e.arrayMissile.push(this)},e.prototype.setBottomLayer=function(e){return this.isBottomLayer=e,this},e.prototype.onUpdate=function(e){this._life++,this._posX+=this._vx,this._posY+=this._vy,this.img.x=this._posX,this.img.y=this._posY,this.shouldSetDead()&&this.setDead()},e.tickLogic=function(e){for(var t=0,i=e.getMissile()._handler;t<i.length;t++){var a=i[t];a instanceof TickEventHandler&&a.trigger(e.getMissile())}},e.edgeLogic=function(e){for(var t=0,i=e.getMissile()._handler;t<i.length;t++){var a=i[t];a instanceof EdgeEventHandler&&a.trigger(e.getMissile())}},e.prototype.hasSpecialLogic=function(e){if(null==this._handler)return!1;for(var t=0,i=this._handler;t<i.length;t++){var a=i[t];if(a instanceof e)return!0}return!1},e.prototype.setDead=function(){this._handler=null,null!=this.img&&null!=this.img.parent&&this.img.parent.removeChild(this.img),MyUtils.removeObjectFromArray(this,SelfMachine.INSTANCE.currentStage.arrayMissile)},e.prototype.getX=function(){return this._posX},e.prototype.getY=function(){return this._posY},e.prototype.getPos=function(){return new egret.Point(this._posX,this._posY)},e.prototype.getEdge=function(){return this.getY()<Main.UPPER_Y?Side.TOP:this.getY()>Main.BELOW_Y?Side.BOTTOM:this.getX()<0?Side.LEFT:this.getX()>Main.X?Side.RIGHT:null},e}();__reflect(MissileBase.prototype,"MissileBase");var C1S4=function(e){function t(){return e.call(this,"c1s4",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new CustomShooter(t,function(e){for(var t=function(t){for(var i=2*Math.random()*Math.PI,a=0;24>a;a++){var n=24+16*t+.01,r=2*a*Math.PI/24+i,s=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(n*Math.cos(r),n*Math.sin(r)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-(3+2*t))}).setTriggerTimes(8)).addHandler(new TickEventHandler(function(e){var t=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(15*Math.cos(t),15*Math.sin(t))}).setTriggerTimes(1).setStartTicks(20)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(20).setStartTicks(20));s.addToStage()}},i=0;3>=i;i++)t(i)}).setFreq(2500)),t.addLogic(new CustomShooter(t,function(e){for(var t=function(t){for(var i=2*Math.random()*Math.PI,a=function(a){var n=32+16*t+.01,r=2*a*Math.PI/36+i,s=(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setPos(e.getPos()).setVelocity(n*Math.cos(r),n*Math.sin(r)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-(4+2*t))}).setTriggerTimes(8)).addHandler(new TickEventHandler(function(e){var i=r+(Math.random()-.5)*Math.PI,a=12+3*t;e.setVelocity(a*Math.cos(i),a*Math.sin(i))}).setTriggerTimes(1).setStartTicks(20));s.addToStage()},n=0;36>n;n++)a(n)},i=0;4>=i;i++)t(i)}).setFreq(2500))},t}(StageBase);__reflect(C1S4.prototype,"C1S4");var RenderLogic=function(e){function t(t,i,a,n){var r=e.call(this,t)||this;return r._texture_width=a,r._texture_height=n,r._texture=i,r.render(SelfMachine.INSTANCE.currentStage),r}return __extends(t,e),t.prototype.setPos=function(e){return null!=this._img&&(this._img.x=e.x,this._img.y=e.y),this},t.prototype.updatePos=function(){this.setPos(this._launcher.getPos())},t.prototype.createIMG=function(){this._img=MyUtils.createBitmapByName(this._texture),this._img.width=this._texture_width,this._img.height=this._texture_height,this._img.anchorOffsetX=this._img.width/2,this._img.anchorOffsetY=this._img.height/2,this.setPos(this._launcher.getPos())},t.prototype.onUpdate=function(e){this.updatePos()},t.prototype.setTexture=function(e){return this._texture=e,this},t.prototype.reset=function(){e.prototype.reset.call(this),this.setPos(this._launcher.getPos())},t.prototype.render=function(e){this.createIMG(),e.addChildAtLayer(this._img,DrawingLayer.EMITTER)},t}(LauncherLogicBase);__reflect(RenderLogic.prototype,"RenderLogic");var AroundLauncher=function(e){function t(t,i,a,n){var r=e.call(this,t)||this;return r._theta=0,r._init_theta=0,r.clockwise=!0,r.shouldRanTheta=!1,r._parent_launcher=i,r._period=a,r._radius=n,r._launcher.setPos(r.calcPos()),r}return __extends(t,e),t.prototype.onUpdate=function(){var e=2*Math.PI*this._freq/this._period;this._theta+=this.clockwise?e:-e,this._theta>=2*Math.PI?this._theta-=2*Math.PI:this._theta<=0&&(this._theta+=2*Math.PI),this._launcher.setPos(this.calcPos())},t.prototype.setTheta=function(e){return this._theta=e,this._init_theta=e,this._launcher.setPos(this.calcPos()),this},t.prototype.randomTheta=function(){return this.shouldRanTheta=!0,this._theta=2*Math.random()*Math.PI,this._launcher.setPos(this.calcPos()),this},t.prototype.setClockwise=function(e){return this.clockwise=e,this},t.prototype.reset=function(){e.prototype.reset.call(this),this.shouldRanTheta?this._theta=2*Math.random()*Math.PI:this._theta=this._init_theta,this._launcher.setPos(this.calcPos())},t.prototype.calcPos=function(){var e=this._parent_launcher.getX()+this._radius*Math.sin(this._theta),t=this._parent_launcher.getY()-this._radius*Math.cos(this._theta);return new egret.Point(e,t)},t}(LauncherLogicBase);__reflect(AroundLauncher.prototype,"AroundLauncher");var AroundPoint=function(e){function t(t,i,a,n){var r=e.call(this,t)||this;return r._theta=0,r._init_theta=0,r.clockwise=!0,r.shouldRanTheta=!1,r._centre=i,r._period=a,r._radius=n,r._launcher.setPos(r.calcPos()),r}return __extends(t,e),t.prototype.onUpdate=function(){var e=2*Math.PI*this._freq/this._period;this._theta+=this.clockwise?e:-e,this._theta>=2*Math.PI?this._theta-=2*Math.PI:this._theta<=0&&(this._theta+=2*Math.PI),this._launcher.setPos(this.calcPos())},t.prototype.setTheta=function(e){return this._theta=e,this._init_theta=e,this._launcher.setPos(this.calcPos()),this},t.prototype.randomTheta=function(){return this.shouldRanTheta=!0,this._theta=2*Math.random()*Math.PI,this._launcher.setPos(this.calcPos()),this},t.prototype.setClockwise=function(e){return this.clockwise=e,this},t.prototype.reset=function(){e.prototype.reset.call(this),this.shouldRanTheta?this._theta=2*Math.random()*Math.PI:this._theta=this._init_theta,this._launcher.setPos(this.calcPos())},t.prototype.calcPos=function(){var e=this._centre.x+this._radius*Math.sin(this._theta),t=this._centre.y-this._radius*Math.cos(this._theta);return new egret.Point(e,t)},t}(LauncherLogicBase);__reflect(AroundPoint.prototype,"AroundPoint");var CustomPath=function(e){function t(t,i){var a=e.call(this,t)||this;return a._shouldResetPos=!0,a._path=i,a}return __extends(t,e),t.prototype.onUpdate=function(e){var t=SelfMachine.INSTANCE.currentStage.getCurrentTick();this._launcher.setPos(this._path(t))},t.prototype.reset=function(){e.prototype.reset.call(this),this._shouldResetPos&&this._launcher.setPos(this._path(0))},t.prototype.resetPos=function(e){return this._shouldResetPos=e,this},t}(LauncherLogicBase);__reflect(CustomPath.prototype,"CustomPath");var Flash=function(e){function t(t,i,a,n,r){var s=e.call(this,t)||this;return s._xmin=i,s._xmax=a,s._ymin=n,s._ymax=r,s}return __extends(t,e),t.prototype.onUpdate=function(e){var t=new egret.Point(this._xmin+Math.random()*(this._xmax-this._xmin),this._ymin+Math.random()*(this._ymax-this._ymin));this._launcher.setPos(t)},t}(LauncherLogicBase);__reflect(Flash.prototype,"Flash");var CustomShooter=function(e){function t(t,i){var a=e.call(this,t,null)||this;return a._func=i,a}return __extends(t,e),t.prototype.onUpdate=function(e){this._func(this._launcher)},t.prototype.createMissile=function(){return null},t}(ShotLogicBase);__reflect(CustomShooter.prototype,"CustomShooter");var RandomShooter=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a._ang1=0,a._ang2=0,a._num=1,a._extra_velocity=0,a}return __extends(t,e),t.prototype.setStartAngle=function(e){return this._ang1=e,this},t.prototype.setEndAngle=function(e){return this._ang2=e,this},t.prototype.setNumber=function(e){return this._num=e,this},t.prototype.setExtraVelocity=function(e){return this._extra_velocity=e,this},t.prototype.onUpdate=function(e){for(var t=0;t++<this._num;){var i=this.createMissile(),a=this._ang1+Math.random()*(this._ang2-this._ang1);a=MyUtils.ang2rad(a);var n=i.getVelocity();i.setVelocity(n*Math.cos(a),n*Math.sin(a)),i.addToStage()}},t.prototype.createMissile=function(){var e=this._missile_prototype.clone(),t=e.getVelocity()+Math.random()*this._extra_velocity;return e.setTotalVelocity(t).setPos(this._launcher.getPos())},t}(ShotLogicBase);__reflect(RandomShooter.prototype,"RandomShooter");var Main=function(e){function t(){var i=e.call(this)||this;return t.INSTANCE=i,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemove,i),i}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.onRemove=function(e){this.removeChildren()},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.info("game start"),[4,this.loadResource()];case 1:return e.sent(),this.addChild(PageMain.INSTANCE),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e=new LoadingUI,this.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return i.sent(),StageData.init(),this.removeChild(e),[3,4];case 3:return t=i.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.getMain=function(){return t.INSTANCE},t.X=1080,t.Y=1920,t.UPPER_Y=240,t.BELOW_Y=1680,t}(egret.Sprite);__reflect(Main.prototype,"Main");var ScatterRotate=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._period=10,t}return __extends(t,e),t.prototype.onUpdate=function(t){this._ang+=360/this._period*this._freq/1e3,e.prototype.onUpdate.call(this,t)},t.prototype.setPeriod=function(e){return this._period=e,this},t.prototype.start=function(){this._init_angle=this._ang,e.prototype.start.call(this)},t.prototype.reset=function(){e.prototype.reset.call(this),this._ang=this._init_angle},t}(Scatter);__reflect(ScatterRotate.prototype,"ScatterRotate");var MyUtils=function(){function e(){}return e.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.cleanMissile=function(e){for(var t=e.arrayMissile.slice(0),i=0,a=t;i<a.length;i++){var n=a[i];n.setDead()}},e.cleanController=function(e){for(var t=e.arrayLauncher.slice(0),i=0,a=t;i<a.length;i++){var n=a[i];n.setDead()}},e.removeObjectFromArray=function(e,t){for(var i=0;i<t.length;i++)if(t[i]==e)return t.splice(i,1),!0;return!1},e.createReasonablePos=function(e){return e.x=Math.max(0,e.x),e.x=Math.min(Main.X,e.x),e.y=Math.max(Main.UPPER_Y,e.y),e.y=Math.min(Main.BELOW_Y,e.y),e},e.ang2rad=function(e){return e/180*Math.PI},e.rad2ang=function(e){return 180*e/Math.PI},e}();__reflect(MyUtils.prototype,"MyUtils");var Side;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(Side||(Side={}));var SideShooter=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a._ang1=0,a._ang2=180,a._num=1,a._extra_velocity=0,a._side=Side.TOP,a}return __extends(t,e),t.prototype.setStartAngle=function(e){return this._ang1=e,this},t.prototype.setEndAngle=function(e){return this._ang2=e,this},t.prototype.setNumber=function(e){return this._num=e,this},t.prototype.setSide=function(e){return this._side=e,this},t.prototype.setExtraVelocity=function(e){return this._extra_velocity=e,this},t.prototype.getPointFromSide=function(){switch(this._side){case Side.TOP:return new egret.Point(Main.X*Math.random(),Main.UPPER_Y);case Side.BOTTOM:return new egret.Point(Main.X*Math.random(),Main.BELOW_Y);case Side.LEFT:return new egret.Point(0,Main.UPPER_Y+Math.random()*(Main.BELOW_Y-Main.UPPER_Y));case Side.RIGHT:return new egret.Point(Main.X,Main.UPPER_Y+Math.random()*(Main.BELOW_Y-Main.UPPER_Y));default:return null}},t.prototype.onUpdate=function(e){for(var t=0;t++<this._num;){var i=this.createMissile(),a=this._ang1+Math.random()*(this._ang2-this._ang1);a=MyUtils.ang2rad(a);var n=i.getVelocity();i.setVelocity(n*Math.cos(a),n*Math.sin(a)),i.addToStage()}},t.prototype.createMissile=function(){var e=this.getPointFromSide(),t=this._missile_prototype.clone(),i=t.getVelocity()+Math.random()*this._extra_velocity;return t.setTotalVelocity(i).setPos(e)},t}(ShotLogicBase);__reflect(SideShooter.prototype,"SideShooter");var Sniper=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._step=15,t._num=1,t._div=0,t}return __extends(t,e),t.prototype.setStep=function(e){return this._step=e,this},t.prototype.setNumber=function(e){return this._num=e,this},t.prototype.setDiv=function(e){return this._div=e,this},t.prototype.onUpdate=function(e){var t=MissileUtils.getSniperAngle(this._launcher.getPos())+MyUtils.ang2rad(this._div)*(2*Math.random()-1),i=0;for(t-=(this._num-1)/2*MyUtils.ang2rad(this._step);i++<this._num;){var a=this.createMissile(),n=a.getVelocity();a.setVelocity(n*Math.cos(t),n*Math.sin(t)),a.addToStage(),t+=MyUtils.ang2rad(this._step)}},t}(ShotLogicBase);__reflect(Sniper.prototype,"Sniper");var EllipticalMissile=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ang=0,t}return __extends(t,e),t.prototype.shouldSetDead=function(){var e=Math.max(this._missile_width,this._missile_height)/2;if(this.getY()<Main.UPPER_Y-e||this.getY()>Main.BELOW_Y+e||this.getX()<-e||this.getX()>Main.X+e){if(this.hasSpecialLogic(EdgeEventHandler)){var t=new MissileEdgeEvent(this);return SelfMachine.INSTANCE.currentStage.dispatchEvent(t),!1}return!0}return!1},t.prototype.initIMG=function(){this.img=MyUtils.createBitmapByName(this._texture),this.img.width=1.15*this._missile_width,this.img.height=1.15*this._missile_height,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2,this.img.x=this._posX,this.img.y=this._posY},t.prototype.isCollide=function(){if(this.ignoreCollideCheck)return!1;var e=(SelfMachine.INSTANCE.getX()-this.getX())*Math.cos(this._ang)+(SelfMachine.INSTANCE.getY()-this.getY())*Math.sin(this._ang),t=(SelfMachine.INSTANCE.getX()-this.getX())*-Math.sin(this._ang)+(SelfMachine.INSTANCE.getY()-this.getY())*Math.cos(this._ang),i=1/Math.sqrt(4/Math.pow(this.getWidth(),2)+4*Math.pow(t,2)/Math.pow(this.getHeight(),2)/Math.pow(e,2));return SelfMachine.SIZE/Math.sqrt(Math.pow(e,2)+Math.pow(t,2))+i/e>=1},t.prototype.onUpdate=function(t){var i=Math.PI/2-this.getDirection();this.img.rotation=-i/Math.PI*180,this._ang=i,e.prototype.onUpdate.call(this,t)},t.prototype.clone=function(){for(var e=(new t).setSize(this._missile_width,this._missile_height).setTexture(this._texture).setBottomLayer(this.isBottomLayer).setPos(new egret.Point(this._posX,this._posY)).setVelocity(this._vx,this._vy),i=0,a=this._handler;i<a.length;i++){var n=a[i];e.addHandler(n.clone())}return e},t}(MissileBase);__reflect(EllipticalMissile.prototype,"EllipticalMissile");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]
})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var MissileUtils=function(){function e(){}return e.getSniperAngle=function(e){var t=SelfMachine.INSTANCE.getX()-e.x,i=SelfMachine.INSTANCE.getY()-e.y;return 0==t?i>=0?Math.PI/2:-Math.PI/2:t>0?Math.atan(i/t):Math.atan(i/t)+Math.PI},e.createEdgePoint=function(){var e=5040*Math.random();return 1080>=e?new egret.Point(e,240):2520>=e?new egret.Point(1080,e-840):3600>=e?new egret.Point(e-2520,1680):new egret.Point(0,e-3360)},e.MISSILE_ROUND="ROUND",e.MISSILE_ELLIPTICAL="ELLIPTICAL",e.RANDOM_VELOCITY_PARA=0,e}();__reflect(MissileUtils.prototype,"MissileUtils");var RoundMissile=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setRadius=function(e){return this.setSize(2*e,2*e)},t.prototype.shouldSetDead=function(){var e=this._missile_width/2;if(this.getY()<Main.UPPER_Y-e||this.getY()>Main.BELOW_Y+e||this.getX()<-e||this.getX()>Main.X+e){if(this.hasSpecialLogic(EdgeEventHandler)){var t=new MissileEdgeEvent(this);return SelfMachine.INSTANCE.currentStage.dispatchEvent(t),!1}return!0}return!1},t.prototype.initIMG=function(){this.img=MyUtils.createBitmapByName(this._texture),this.img.width=1.15*this._missile_width,this.img.height=1.15*this._missile_height,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2,this.img.x=this._posX,this.img.y=this._posY},t.prototype.isCollide=function(){if(this.ignoreCollideCheck)return!1;var e=this.getX()-SelfMachine.INSTANCE.getX(),t=this.getY()-SelfMachine.INSTANCE.getY(),i=Math.sqrt(e*e+t*t);return i<=SelfMachine.SIZE+this._missile_width/2?!0:!1},t.prototype.clone=function(){for(var e=(new t).setSize(this._missile_width,this._missile_height).setTexture(this._texture).setBottomLayer(this.isBottomLayer).setPos(new egret.Point(this._posX,this._posY)).setVelocity(this._vx,this._vy),i=0,a=this._handler;i<a.length;i++){var n=a[i];e.addHandler(n.clone())}return e},t}(MissileBase);__reflect(RoundMissile.prototype,"RoundMissile");var EdgeEventHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.shouldTrigger=function(e){return 0!=this.triggerTimes},t.prototype.clone=function(){return new t(this._func).setTriggerTimes(this.triggerTimes)},t.prototype.trigger=function(t){e.prototype.trigger.call(this,t),0==this.triggerTimes&&t.removeHandler(this)},t}(MissileEventHandler);__reflect(EdgeEventHandler.prototype,"EdgeEventHandler");var MissileEvent=function(e){function t(t,i){var a=e.call(this,t,!0,!1)||this;return a._missile=i,a}return __extends(t,e),t.prototype.getMissile=function(){return this._missile},t.TICK="missile_tick",t.EDGE="missile_edge",t}(egret.Event);__reflect(MissileEvent.prototype,"MissileEvent");var MissileTickEvent=function(e){function t(t){return e.call(this,MissileEvent.TICK,t)||this}return __extends(t,e),t}(MissileEvent);__reflect(MissileTickEvent.prototype,"MissileTickEvent");var MissileEdgeEvent=function(e){function t(t){return e.call(this,MissileEvent.EDGE,t)||this}return __extends(t,e),t}(MissileEvent);__reflect(MissileEdgeEvent.prototype,"MissileEdgeEvent");var TextHelper=function(){function e(){}return e.initStageText=function(){StageData.tutorial1.title="学习移动",StageData.tutorial2.title="判定点",StageData.tutorial3.title="认识弹幕1",StageData.tutorial4.title="认识弹幕2",StageData.tutorial5.title="认识弹幕3",StageData.tutorial6.title="学习跳过",StageData.stage1_1.title="1-1 初探",StageData.stage1_2.title="1-2 莲子",StageData.stage1_3.title="1-3 旋转",StageData.stage1_4.title="1-4 花火",StageData.stage1_5.title="1-5 冲击",StageData.stage1_6.title="1-6 爆裂",StageData.stage1_7.title="1-ex 跟踪",StageData.stage2_1.title="2-1 白给",StageData.stage2_2.title="2-2 飞絮",StageData.stage2_3.title="2-3 反射",StageData.stage2_4.title="2-4 快慢",StageData.stage2_5.title="2-5 横跳",StageData.stage2_6.title="2-6 绽放",StageData.stage2_7.title="2-7 喷涌",StageData.stage3_1.title="3-1 细雨",StageData.stage3_2.title="3-2 落雪",StageData.stage3_3.title="3-3 水华",StageData.stage3_4.title="3-4 旋涡",StageData.stage3_5.title="3-5 夹击",StageData.stage3_6.title="3-6 飞花",StageData.stage3_7.title="3-ex 天火",StageData.stage1_1h.title="1-1H 下马威",StageData.stage1_2h.title="1-2H 流矢霰弹",StageData.stage1_3h.title="1-3H 花吹雪",StageData.stage1_4h.title="1-4H 星桥火树",StageData.stage1_5h.title="1-5H 二重冲击",StageData.stage1_6h.title="1-6H 花朵加农",StageData.stage1_7h.title="1-EX 多重制导",StageData.stage2_1h.title="2-1H 瞬间白给",StageData.stage2_2h.title="2-2H 飞絮落花",StageData.stage2_3h.title="2-3H 三面埋伏",StageData.stage2_4h.title="2-4H 追云逐月",StageData.stage2_5h.title="2-5H 反复横跳",StageData.stage2_6h.title="2-6H 死亡绽放",StageData.stage2_7h.title="2-EX 花团锦簇",StageData.stage3_1h.title="3-1H 决河倾",StageData.stage3_2h.title="3-2H 珠径雨",StageData.stage3_3h.title="3-3H 赤潮",StageData.stage3_4h.title="3-4H 百慕大",StageData.stage3_5h.title="3-5H 万花丛中",StageData.stage3_6h.title="3-6H 风雨落花",StageData.stage3_7h.title="3-EX 星陨",StageData.stageEX_1.title="ex-1 波与粒子",StageData.stageEX_2.title="ex-2 滴水成冰",StageData.stageEX_3.title="ex-3 流水西归",StageData.stageEX_4.title="ex-4 九宫八卦",StageData.stageEX_5.title="ex-5 阴阳交错",StageData.test.title="测试关卡",StageData.tutorial1.tutorial_text="在本游戏中，玩家可以通过拖动游戏画面的任何部分，来1:1地移动自机位置。点击屏幕右下角的i按钮可以查看当前关卡的小贴士。",StageData.tutorial2.tutorial_text="本关学习自机的判定点。在本游戏中，玩家只有金鱼中间的黑点中弹才算游戏失败，因此本关站着不动即可过关。",StageData.tutorial3.tutorial_text="本关认识弹幕中最常见的一类——固定弹，即无论如何都不发生变化的弹幕。请点击右下角的i按钮查看帮助。",StageData.tutorial4.tutorial_text="本关认识弹幕类型中的随机弹，即在一定限制下随机生成的弹幕。请继续点击i按钮查看帮助。",StageData.tutorial5.tutorial_text="本关认识弹幕类型中的萌新杀手——自机狙，但其实掌握技巧就很很躲。请仍然点击i按钮查看帮助。",StageData.tutorial6.tutorial_text="本关请您尝试位于选关和死亡界面的关卡跳过功能。请放心，不会有收费或者广告的。（当然，如果想试试硬打也可以）",StageData.stage1_1.tutorial_text="欢迎来到正式关卡！从本关开始本弹出框就不会再出现了，但右下角的i按钮仍然可用，如果卡关了记得去看看！",StageData.stage1_1h.tutorial_text="欢迎来到困难关卡！可以说，这才是游戏真正的开始。请不要妄想一次通过，反复尝试攻略吧。",StageData.stageEX_1.tutorial_text="欢迎来到额外关卡！额外关卡难度并不比困难更高，它们只是一系列与主题无关的、很多都是从别处借鉴而来的弹幕，请尽情游玩吧。",StageData.tutorial1.help_text="这里是关卡的帮助文本，会有一些过关的小技巧，可以帮助你更容易地过关。由于帮助文本都是游戏制作者亲自写的，因此每一关的文本都不同，如果卡关了记得常来看看。\n\n不过这关真的没什么好说的就是啦。",StageData.tutorial2.help_text="虽然在帮助中已经写过了，但我估计没人玩游戏真的会去看帮助(笑)，所以这里还是再说一遍。\n\n本游戏作为弹幕类游戏，与通常的打飞机游戏最大的区别在于，中弹判定范围只有自机中心的黑点(换言之，并不是整条鱼)，所以本关中看起来花里胡哨的弹幕根本打不到你。",StageData.tutorial3.help_text="所谓固定弹，即和自机位置没有任何关系，亦没有任何随机性的子弹，甚至每次重开关卡位置都不变。\n\n因此，固定弹的破解要点在于多打几遍，记住弹幕的形状，并且(通过背板)提前得知弹幕袭来的方向，并且找到安全的位置。",StageData.tutorial4.help_text="随机弹是一种射出时速度和方向都不固定的子弹，因此也是一种很拼运气的子弹，有时运气不好就会被随机弹完全堵死，这很正常。\n\n俗话说得好，固定弹固定撞，随机弹随机封，这边建议亲亲多尝试几次呢。",StageData.tutorial5.help_text="自机狙属于不掌握技巧就很难应付的类型，因此是STG类游戏中劝退新人的第一道难关。这里教大家一个通用解法，单向微移法。\n\n由于自机狙子弹在瞄准之后，飞行轨迹就不再改变，因此玩家只需要从屏幕的一角向另一个方向缓慢移动，就可以让所有子弹从玩家另一侧擦过。",StageData.tutorial6.help_text="其实这关打起来没什么技巧啦，就是靠底力和一丁点运气。\n\n其实我把这关放在这里的原因就是难度过于鸡肋，因为对于STG老手来说这关真的很简单，但对于没有STG基础的萌新来说又太难，所有实在没有地方放，只好丢在这里。",StageData.stage1_1.help_text="本关虽然乍一看非常恐怖，但其实所有屏幕上的子弹都是单数自机狙，如果你会单向微移法的话，本关就是完全白给。\n\n如果不会的话，你肯定跳教程了，请重新打开教程关《认识弹幕3》查看右下角帮助。\n\n本关设计者：chitose",StageData.stage1_2.help_text="本关和上一关解法类似。由于莲子是逐渐减速的，因此在屏幕下方进行规避会稍微简单一些。\n\n需要特别注意的是，在屏幕下方微移躲自机狙时，请注意把握好穿过慢速花瓣固定弹的时机。\n\n本关设计者：chitose",StageData.stage1_3.help_text="本关像加特林一样的发射器发射的弹幕包括紫色固定弹，粉色自机狙和蓝色白给弹。所谓白给弹，又名偶数自机狙，如果你不乱走的话是不会击中你哒。因此，本关只需要注意在版底微移时，不要被（很瞎眼的）紫色固定弹击中。\n\n本关设计者：chitose",StageData.stage1_4.help_text="和前几关中连续发射的自机狙有所不同，本关中的自机狙是离散的，所以不需要用微移法。\n\n本关的解法是在弹幕扩散开的瞬间大幅位移，并找好红弹的缝隙穿过去。相对而言，本关比较吃基本功，技巧性并不高。\n\n本关设计者：chitose",StageData.stage1_5.help_text="本关狙击角度逐渐扩大的自机狙可以选择微移擦弹，也可以选择快速移动躲开。但前者容易走太慢暴毙，后者容易撞流矢翻车，要权衡利弊。\n\n本关制作者：chitose\n\n本关设计者：花花",StageData.stage1_6.help_text="那么，如果你是一名STG新手，经过前几关的磨炼之后应该开始适应这种华丽的弹幕游戏了吧，所以这一关稍微加一点难度。\n\n本关由粉色自机狙，蓝色随机弹和紫色固定弹构成，和1-3类似，在微移躲自机狙的找准穿固定弹的时机，同时要注意飞来的流矢。\n\n本关设计者：chitose",StageData.stage1_7.help_text="本关作为第一个ex关卡，难度比之前的（白给）关可能稍高，实在过不了就跳过吧。\n\n如果非要击破的话，本关一定不能微移，而是要在版底大幅度反复横跳，二阶自机狙可不会轻易白给。\n\n本关制作者：chitose\n\n本关设计者：zun(笑)",StageData.stage2_1.help_text="欢迎来到第二章！本章节中的所有关卡均为固定弹关卡，换句话说，本关中所有子弹的位置都是固定的，因此可能会出现安定点。\n\n如标题所说，本关是让玩家认识固定弹的白给关。请注意，不要同时穿蓝色弹和粉色弹，这相当危险。\n\n本关设计者：chitose",StageData.stage2_2.help_text="和之前的关卡相比，本关的弹幕相当慢，因此在版底避弹时只需要集中注意力盯住自机附近的一小块区域。\n\n当然你也可以选择跟着发射器旋转(东方跟着转)，其实也挺简单的，说到底这也只是easy难度嘛。\n\n本关设计者：chitose",StageData.stage2_3.help_text="和之前的关卡相比，这一关稍微有一点难度，主要是因为比较吃基本功，没有什么逃课小技巧。\n\n本关的难点在于玩家需要眼观三路，提前走到弹幕稀薄的地带，否则很容易被封位。\n\n本关设计者：chitose",StageData.stage2_4.help_text="如果你注意观察就会发现，本关中看起来很凶残的加速弹和减速弹其实发射角度是固定的。\n\n因此，你只需要站在加减速弹打不着的的角度范围内，左右小幅移动躲紫色弹就可以了，其中有些位置甚至可以安定很久。\n\n本关设计者：chitose",StageData.stage2_5.help_text="本关的解法正如标题所说，无论在屏幕中部还是下方，总之左右反复横跳就对了，其实是相当爽快的一关。\n\n记住，左右横跳的时候要快准狠，千万别犹豫！\n\n本关制作者：chitose\n\n本关设计者：忘了哪里看到的自制LuaSTG关卡",StageData.stage2_6.help_text="说到底Easy难度的关卡设计起来就是麻烦，既要让STG新手也能相对轻松过关，又要保证画面相对华丽，实在是太累人了。\n\n因此，本关是我绞尽脑汁想出的，看起来很难实际上白给的关卡，快录屏分享给小伙伴们炫耀一下吧(大雾\n\n本关设计者：chitose",StageData.stage2_7.help_text="关于难度的说明同1-ex。再怎么说，ex关卡作为让STG新手向Hard难度逐渐过渡的垫脚石，也不能太简单是不是。\n\n本关设计者：chitose",StageData.stage3_1.help_text="本章节的所有关卡均包含来自上方的随机弹。请时刻留心四周（而不仅仅是上方），以防被其他方向的子弹封位。\n\n友情提示：本关在版底躲避弹幕比较危险，因为自机如果在版底被封位将无路可退，而在屏幕中心区域伺机上穿会容易很多。\n\n本关设计者：chitose",StageData.stage3_2.help_text="本关和上一关非常类似，但相比之下弹幕要密集的多也慢得多。因此，本关的推荐解法也和上一关类似，自机在屏幕上方开局，并且跟着子弹的步伐向下拉，然后找机会上穿。\n\n(我先，都是我先，明明都是我先来的...\n\n本关设计者：chitose",StageData.stage3_3.help_text="每次看到这种泛着油光的飘满绿色不明物质的水体，其实我都会感觉相当恶心...本关纯底力关，大家加油。\n\n本关制作者：chitose\n\n本关设计者：花花",StageData.stage3_4.help_text="这一关属于那种相当瞎眼的关卡，玩久了就会像被催眠一样整个头都是晕的。因此这里建议大家沿着中线小幅上下躲避，尽量不要跟着旋涡转。\n\n本关设计者：chitose",StageData.stage3_5.help_text="本关俗称“老奶奶过马路”，不少游戏中应该都有类似关卡。\n\n本关被封位几率较小，因此不需要关注全局，只需要集中注意力盯住自机附近的一小块区域。自机位置推荐在屏幕中心，上下左右小幅运动避弹。\n\n本关制作者：chitose",StageData.stage3_6.help_text="子弹类型博览会(bushi。相当瞎眼的底力关，祝你好运。\n\n本关设计者：chitose",StageData.stage3_7.help_text="关于难度的说明同1-ex。如果你能通关全部三个ex关卡，那么可以尝试一下打hard了。\n\n本关制作者：chitose\n\n本关设计者：zun(笑)",StageData.stage1_1h.help_text="鉴于能打hard的人水平应该都不需要看提示了，这个难度下这里就用来碎碎念吧。\n\n据说国内真正了解东方project和STG的只有600人，而我绝对算不上其中之一。不过我也希望能借这个游戏让更多人接触到STG和东方圈子。\n\n本关设计者：chitose",StageData.stage1_2h.help_text="这一关其实历史非常悠久了，当我第一次做出这个游戏的原型，甚至还没有选关和胜利界面的时候，屏幕上用来测试的就是这一关。\n\n如果各位有兴趣看看这个游戏最初长什么德行，可以去本游戏的taptap论坛上看看。\n\n本关设计者：chitose",StageData.stage1_3h.help_text="这一关历史比1-2稍微短一点，但印象中也已经跟随了我很多个版本没有被删掉。\n\n这期间机制越加越多，但这一关始终牢牢占住1-3的位置，也许是因为这关确实很好看吧。\n\n本关设计者：chitose",StageData.stage1_4h.help_text="和1-3不同，这一关在过去设计得很差，完全就是凑数关。重制时我在几个版本之间反复纠结了很多次，最后还是选择了这个设计。\n\n这个设计的灵感来源是花朵盛开时好像喷火一样，结果没想到写着写着就变成真的烟花了...\n\n本关设计者：chitose",StageData.stage1_5h.help_text="上个版本的1-5关卡甚至比1-4还要差，因为之前实在凑不出关卡了，其实手感很差扭起来也很糟，完全属于硬加难度了。\n\n然后在b站闲逛的时候，无意中看到了花花的CS自制弹幕，感觉这张符卡有点像逐渐绽放的一瓣莲花花瓣，就顺手抄了下来，顺便混进了他的粉丝群。\n\n本关设计者：花花",StageData.stage1_6h.help_text="说来惭愧，这一关其实并不完全是我设计出来的，而是参考了uuz「完全墨染的樱花」，作了一些调整和简化最终完成的。\n\n说实话，虽然我STG玩的很糟，但原版中先扭再爆的花实在是让人很瞎（而且很难写），于是就改成了现在这样。\n\n本关设计者：chitose",StageData.stage1_7h.help_text="看到这一关，有些车万狗可能已经产生幻视了。没错，这一关就是本人车万入坑作，th08中灵梦的符卡——回霊「夢想封印 侘」。\n\n总之非常感谢某个酒鬼程序员对本游戏的大力支持(笑)\n\n本关设计者：zun(笑)",StageData.stage2_1h.help_text="这一关与其说是符卡，在设计上其实不如说更接近非符一点，因为完全没有任何设计原型或者灵感在里边，缺乏感情的一关。\n\n其实我也不是什么STG老玩家，因此有些关卡设计得不是很好...而这关正是其中典型。\n\n本关设计者：chitose",StageData.stage2_2h.help_text="古诗云：\n年年二月暮，\n散乱杂飞花。\n雨过微风起，\n狂飘千万家。\n\n春天就该是绚烂的季节..我本想这么说的，奈何本人花粉过敏。\n\n本关设计者：chitose",StageData.stage2_3h.help_text="古有项羽垓下之围十面埋伏，今有小金鱼在池塘里惨遭三面子弹反射板围攻...开个玩笑。\n\n类似的关卡设计已经在不少STG游戏中出现过了，但仍然是相当经典、有趣的关卡设计，很好。\n\n本关设计者：chitose",StageData.stage2_4h.help_text="这一关的设计初衷是想做出加速弹和减速弹交错前进，让人眼花缭乱的那种感觉。\n\n事实证明我失败了。本关的难点所在并不是那些角度固定的加速弹和减速弹，而是密密麻麻的紫色固定弹，感觉很糟。\n\n本关设计者：chitose",StageData.stage2_5h.help_text="如果说2-5还算是成功的设计，能让人玩的很爽快的话，这一关就是完完全全的败笔。\n\n由于同一关卡在简单难度和困难难度的设计必须是统一的，而我实在不知道2-5该怎么改，所以做成了这个德行，真是抱歉。\n\n本关设计者：chitose",StageData.stage2_6h.help_text="这一关是我最最最讨厌的交叉弹，但真的很漂亮，仿佛盛开的死亡之花。\n\n本着“好不容易当一次策划还不快恶心恶心玩家”的原则，本关被添加到了游戏当中(笑)。\n\n本关设计者：chitose",StageData.stage2_7h.help_text="实话实说，本关最初设计原型：蓝妈终符——幻神「飯綱権現降臨」，相信各位越共也看得出来。\n\n但是，这一关在难度调整的过程中越改越离谱，最后完全变成了大量风车弹的堆砌，完全看不出原型了。因此，我大概可以勉强这样说：\n\n本关设计者：chitose",StageData.stage3_1h.help_text="下雨一直是我最讨厌的天气，因为即使打伞也会被各种角度的风刮来的雨浇成落汤鸡，更何况还要注意四处飞溅的泥点子。\n\n据说车万人下雨都不用打伞，到家以后全身只有一个点是干的(笑)。\n\n本关设计者：chitose",StageData.stage3_2h.help_text="比起纷纷扬扬飘洒的雪花，个人认为还是冰雹更有冲击力(物理)。\n\n试想一下，鸡蛋大小的冰雹，带着一往无前的气势从天而降，砸烂汽车玻璃，并在车身上留下大大小小的弹坑。美工对此表示：“爽！”\n\n本关设计者：chitose",StageData.stage3_3h.help_text="比起公园里那些泛着油光的飘满绿色不明物质的水体，其实更恶心的是红绿相间还夹杂着死鱼烂虾的赤潮。\n\n本关尽力模拟出了那种又红又绿的水体，希望能够恶心到大家。\n\n本关设计者：花花",StageData.stage3_4h.help_text="从小我们就从各种十万个为什么或者百科全书上听说过百慕大的可怕之处，但其中原因众说纷纭。有些说是磁场，有些说是暗礁，还有些说是暗流。\n\n虽然我不认为这些东西能够对现代的核潜艇产生什么影响，不过总之这一关的漩涡还是相当可怕的。\n\n本关设计者：chitose",StageData.stage3_5h.help_text="“老奶奶过马路”超级升级版，飙车老爷爷好评追加中！\n\n其实这一关的难点在于，飙车老爷爷的出现大幅减少了躲避过马路老奶奶的路线数量，并且很容易让玩家出现瞬间的手脑控制失调。\n\n本关制作者：chitose",StageData.stage3_6h.help_text="大型子弹类型博览会(bushi。相当瞎眼的底力关，祝你好运。\n\n本关设计者：chitose",StageData.stage3_7h.help_text="虽然火雨看起来很吓人，其实瑟缩在版底注意不要被封位就好了，难度并没有像看起来那么高，只是相当看人品。\n\n这一关本来是想仿乌鸦的爆符『千兆耀斑』，但是有些搞砸了...\n\n本关设计者：zun(笑)",StageData.stageEX_1.help_text="据说，每一个刚刚接触到自制STG的初学者都会做出一个他们自己的「波与粒子的境界」，就好像每个MAD初学者都会做一个仿青空一样。\n\n(此处应有：滑与稽的境界.gif\n\n本关制作者：kaguya\n\n本关设计者：zun(笑)",StageData.stageEX_2.help_text="想象一下，你正处在一个昏暗而寒冷的洞穴中，岩石般坚硬的寒冰把你围在了一个狭窄的圈子中间。\n\n突然，前一秒还在滴答滴答的水珠也冻成了坚冰，像子弹一样朝你袭来...\n\n果然我不太擅长讲鬼故事呢。\n\n本关设计者：chitose",StageData.stageEX_3.help_text="“百川东到海，何时复西归。”古人曾经这样感叹时间的一去不返。然而此时此刻，就让我们来感受一下时光倒流，奔流的河水向源头席卷而来的恐惧吧。\n\n本关制作者：chitose\n\n本关设计者：花花",StageData.stageEX_4.help_text="“易有太极，是生两仪，两仪生四象，四象生八卦，八卦定吉凶，吉凶生大业。”\n\n类似于八卦阵中的生门，本关逐渐扩散开的八卦中只有三爻全阴的坤卦可以穿过，让小金鱼好好学习一下易经吧。\n\n本关设计者：chitose",StageData.stageEX_5.help_text="实在不知道该写什么，等花花来帮我写...\n\n本关制作者：chitose\n\n本关设计者：花花",StageData.test.help_text="本关是开发者用来测试临时关卡用的，不要过于好奇哦"},e.welcome_text="感谢您下载本游戏！本游戏为泛STG类游戏，如果您没玩过类似游戏，建议先查看游戏帮助和教程；如果您是老越共了，请无视这段话。",e.warning_text="欢迎来到小金鱼历险记的世界！很抱歉游戏还没完全完成，但由于开发者迫切地想要知道玩家对难度的看法，所以接下来全靠你们了。",e.help_text=[{text:"在本游戏中，你将控制一条小金鱼进行一次紧♂张而刺♂激的冒险。\n\n"},{text:"和其他常见的STG类游戏不同的是，"},{text:"你没有任何攻击能力",style:{bold:!0,textColor:16711680}},{text:"（毕竟你只是一条小金鱼）。而你的获胜条件是"},{text:"在上方的倒计时结束前躲避屏幕上的所有弹幕",style:{bold:!0,textColor:16711680}},{text:"。没错，和车万类似，只要撞到任何一颗就会死（毕竟你只是一条小金鱼）。\n\n"},{text:"你可以通过拖动"},{text:"屏幕的任意位置",style:{bold:!0,textColor:16711680}},{text:"来控制小金鱼的移动。需要特别说明的是，小金鱼的中弹判定范围"},{text:"只有小金鱼中心的黑点",style:{bold:!0,textColor:16711680}},{text:"，并不是整条鱼，所以其实比想象中要简单很多。如果你是一名车万玩家，那这个游戏应该难不倒你。\n\n"},{text:"有些关卡虽然看起来杂乱无章，但其实有些小技巧可以帮助你快速通关。如果你卡在某一关很久，那么可以试试点击"},{text:"关卡右下角",style:{bold:!0,textColor:16711680}},{text:"的提示按钮，里面一些（我写的）小提示也许能够帮到你。或者实在不行还可以跳过嘛。\n\n"},{text:"祝你好运！\n\n",style:{bold:!0,textColor:16711680}}],e.game_info_text=[{text:"游戏名：小金鱼历险记\n"},{text:"软著号：2019SR1107678\n"},{text:"版本号：release-2.2.0\n"},{text:"更新日期：2020.4.13\n"},{text:"开发：Nulladev开发组\n"},{text:"策划：chitose@nulladev\n"},{text:"开发：chitose@nulladev\n"},{text:"美工：nyx@nulladev\n"},{text:"测试：nulladev的各位，and you\n\n"},{text:"本游戏代码完全开源，开源地址：github.com/NullaDev/SBSTG，代码禁止商用还请注意。\n\n"},{text:"如果你在游戏中遇到Bug，请发邮件到bug-report@nulladev.cn进行反馈，并在邮件中注明bug出现位置和复现情况，最好带上截图。\n\n"},{text:"本游戏玩家群：859853778(暂时没什么人)"}],e.developer_text=[{text:"这里是游戏开发者，nulladev开发组组长chitose。关于这个游戏，其实我有很多想说的话，这里就分享一些给大家。\n"},{text:"实际上这个游戏最初是我第一次接触egret引擎时写的练手用demo，本来一度想要放弃了，幸而此时遇到了美工nyx，因此又断断续续写了很久，终于写到了现在的规模。\n"},{text:"至于以后嘛，我估计可能还会陆陆续续加一些新的关卡，但架构上不会有太大的变动了。\n"},{text:"由于这个游戏的底层是我一行一行写的，这个游戏实际上可扩展性还是很强的，可以看做是手机端LuaSTG，因此希望给本游戏增加新关卡的热心玩家(真的有吗)可以发邮件到chitose@nulladev.cn联系我。\n\n"},{text:"虽然说本人忝为开发组组长，但nulladev本质上是一些游戏爱好者讨论游戏和编程(shuiqun)的组织，因此整个游戏的开发部分其实是我一个人完成的。"},{text:"如果您在游戏中发现Bug或难度设计不合理的地方，还希望大家多多包涵并及时向我反馈，联系方式见“游戏信息”，我很重视大家的意见。\n"},{text:"如果您想要加入Nulladev开发组，并且在开发、美工、策划方面有一定经验，请加n组组群：159628975。\n"}],e}();__reflect(TextHelper.prototype,"TextHelper");var TickEventHandler=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._startTicks=0,t}return __extends(t,e),t.prototype.setStartTicks=function(e){return this._startTicks=e,this},t.prototype.shouldTrigger=function(e){var t=e.getLife();return t>=this._startTicks&&0!=this.triggerTimes},t.prototype.clone=function(){return new t(this._func).setStartTicks(this._startTicks).setTriggerTimes(this.triggerTimes)},t}(MissileEventHandler);__reflect(TickEventHandler.prototype,"TickEventHandler");var TextureNames=function(){function e(){}return e.MAIN_PAGE="main_page_png",e.GAME_SKY="game_sky_png",e.GAME_TITLE="game_title_png",e.MISSILE_STANDARD="missile_standard_png",e.MISSILE_RING="missile_ring_png",e.MISSILE_RING_RED="missile_ring_red_png",e.MISSILE_BLUE="missile_blue_png",e.MISSILE_GREEN="missile_green_png",e.MISSILE_RED="missile_red_png",e.MISSILE_LIANZI="missile_lianzi_png",e.MISSILE_PETAL1="missile_petal1_png",e.MISSILE_PETAL2="missile_petal2_png",e.MISSILE_PETAL3="missile_petal3_png",e.MISSILE_PETAL4="missile_petal4_png",e.MISSILE_HAIL="missile_hail_png",e.MISSILE_LEAF="missile_leaf_png",e.FLOWER0="flower0_png",e.FLOWER1="flower1_png",e.FLOWER2="flower2_png",e.FLOWER3="flower3_png",e.FLOWER8="flower8_png",e.BUTTON_NORMAL="btn_normal_png",e.BUTTON_RETURN="btn_return_png",e.BUTTON_RESTART="btn_restart_png",e.BUTTON_PAUSE="btn_pause_png",e.BUTTON_INFO="btn_info_png",e.BUTTON_RESUME="btn_resume_png",e.BUTTON_NEXT="btn_next_png",e.BUTTON_SKIP="btn_skip_png",e.POPUP_SQUARE="popup_square_png",e.POPUP_LONG="popup_long_png",e.POPUP_PAUSE="popup_pause_png",e.POPUP_DEAD="popup_dead_png",e.POPUP_WIN="popup_win_png",e.STAGE_UNFINISHED="stage_unfinished_png",e.STAGE_FINISHED="stage_finished_png",e.STAGE_SKIPPED="stage_skipped_png",e.SELF_MACHINE="self_machine_png",e}();__reflect(TextureNames.prototype,"TextureNames");var SelfMachine=function(e){function t(){var t=e.call(this)||this;return t.currentStage=null,t.currentChapter=null,t.UNDEAD=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.leaveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.doRender()},t.prototype.doRender=function(){this._img=MyUtils.createBitmapByName(TextureNames.SELF_MACHINE),this._img.width=t.WIDTH,this._img.height=t.HEIGHT,this._img.anchorOffsetX=this._img.width/2,this._img.anchorOffsetY=this._img.height/2,this._img.x=Main.X/2,this._img.y=Main.Y/2,this.addChild(this._img),this._shape=new egret.Shape,this._shape.x=Main.X/2,this._shape.y=Main.Y/2,this._shape.graphics.beginFill(0,1),this._shape.graphics.drawCircle(0,0,t.SIZE),this._shape.graphics.endFill(),this.addChild(this._shape)},t.prototype.getX=function(){return this._img.x},t.prototype.getY=function(){return this._img.y},t.prototype.getPos=function(){return new egret.Point(this._img.x,this._img.y)},t.prototype.setPos=function(e){this._shape.x=e.x,this._shape.y=e.y,this._img.x=e.x,this._img.y=e.y},t.prototype.leaveStage=function(){this.removeChildren(),this.currentStage=null},t.INSTANCE=new t,t.WIDTH=61,t.HEIGHT=166,t.SIZE=8,t}(egret.Sprite);__reflect(SelfMachine.prototype,"SelfMachine");var ButtonWithText=function(e){function t(t,i,a,n){var r=e.call(this,t,i,a)||this;return r._color=16777215,r._text=n,r}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this),this.textfield=new egret.TextField,this.textfield.width=this.img.width,this.textfield.height=this.img.height,this.textfield.x=this.img.x,this.textfield.y=this.img.y,this.textfield.anchorOffsetX=this.img.width/2,this.textfield.anchorOffsetY=this.img.height/2,this.textfield.size=50,this.textfield.text=this._text,this.textfield.textColor=this._color,this.textfield.textAlign=egret.HorizontalAlign.CENTER,this.textfield.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.textfield)},t.prototype.setColor=function(e){this._color=e},t}(Button);__reflect(ButtonWithText.prototype,"ButtonWithText");var ChooseMode=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e);var i=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.2*Main.Y),"教程");i.setAction(t.click_enter_tutorial),this.addChild(i);var a=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.4*Main.Y),"主线（简单）");a.setAction(t.click_enter_easy),this.addChild(a);var n=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.6*Main.Y),"主线（困难）");n.setAction(t.click_enter_hard),this.addChild(n);var r=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.8*Main.Y),"额外关卡");r.setAction(t.click_enter_ex),this.addChild(r);var s=new Button(180,180,new egret.Point(660,1800)).setTexture(TextureNames.BUTTON_RETURN);s.setAction(t.click_return),this.addChild(s)},t.click_enter_tutorial=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(StageData.chapter_tutorial),SelfMachine.INSTANCE.currentChapter=StageData.chapter_tutorial},t.click_enter_easy=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(ModeEasy.INSTANCE)},t.click_enter_hard=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(ModeHard.INSTANCE)},t.click_enter_ex=function(e){return null!=StageData.chapter_extra.front_stage&&LocalData.getStageData(StageData.chapter_extra.front_stage)==STAGE_DATA.UNFINISHED?void MsgBox.showMsgBox(t.INSTANCE,"本章节将在通关或跳过该关卡后解锁：\n"+StageData.chapter_extra.front_stage.title):(t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(StageData.chapter_extra),void(SelfMachine.INSTANCE.currentChapter=StageData.chapter_extra))},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageMain.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(ChooseMode.prototype,"ChooseMode");var ModeEasy=function(e){function t(){var t=e.call(this)||this;return t.arrayButton=new Array,t}return __extends(t,e),t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e);for(var i=0,a=this.arrayButton;i<a.length;i++){var n=a[i];this.addChild(n)}var r=new Button(180,180,new egret.Point(660,1800)).setTexture(TextureNames.BUTTON_RETURN);r.setAction(t.click_return),this.addChild(r)},t.prototype.addChapter=function(e,i){var a=new ButtonWithText(550,150,i,e.chapter_name);a.setAction(t.createFunc(e)),this.arrayButton.push(a)},t.createFunc=function(e){var i=function(){return null!=e.front_stage&&LocalData.getStageData(e.front_stage)==STAGE_DATA.UNFINISHED?void MsgBox.showMsgBox(t.INSTANCE,"本章节将在通关或跳过该关卡后解锁：\n"+e.front_stage.title):(t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(e),void(SelfMachine.INSTANCE.currentChapter=e))};return i},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(ChooseMode.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(ModeEasy.prototype,"ModeEasy");var ModeHard=function(e){function t(){var t=e.call(this)||this;return t.arrayButton=new Array,t}return __extends(t,e),t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e);for(var i=0,a=this.arrayButton;i<a.length;i++){var n=a[i];this.addChild(n)}var r=new Button(180,180,new egret.Point(660,1800)).setTexture(TextureNames.BUTTON_RETURN);r.setAction(t.click_return),this.addChild(r)},t.prototype.addChapter=function(e,i){var a=new ButtonWithText(550,150,i,e.chapter_name);a.setAction(t.createFunc(e)),this.arrayButton.push(a)},t.createFunc=function(e){var i=function(){return null!=e.front_stage&&LocalData.getStageData(e.front_stage)==STAGE_DATA.UNFINISHED?void MsgBox.showMsgBox(t.INSTANCE,"本章节将在通关或跳过该关卡后解锁：\n"+e.front_stage.title):(t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(e),void(SelfMachine.INSTANCE.currentChapter=e))};return i},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(ChooseMode.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(ModeHard.prototype,"ModeHard");var PageAboutGame=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e),this.titleText=new egret.TextField,this.titleText.width=1080,this.titleText.height=120,this.titleText.x=0,this.titleText.y=60,this.titleText.size=72,this.titleText.text="关于游戏",this.titleText.textColor=0,this.titleText.fontFamily="KaiTi",this.titleText.textAlign=egret.HorizontalAlign.CENTER,this.titleText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.titleText);var i=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.2*Main.Y),"游戏信息");i.setAction(t.click_game_info),this.addChild(i);var a=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.4*Main.Y),"开发者的话");a.setAction(t.click_developer_words),this.addChild(a);var n=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.6*Main.Y),"清除数据");n.setAction(t.click_clear),this.addChild(n);var r=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.8*Main.Y),"返回");r.setAction(t.click_return),this.addChild(r)},t.click_game_info=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageGameInfo.INSTANCE)},t.click_developer_words=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageDeveloperWords.INSTANCE)},t.click_clear=function(e){LocalData.clear(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageMain.INSTANCE)},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageMain.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(PageAboutGame.prototype,"PageAboutGame");var PageChapter=function(e){function t(t){var i=e.call(this)||this;return i._stage_map={},i.front_stage=null,i.chapter_name=t,StageData.arrayChapter.push(i),i}return __extends(t,e),t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e),this.titleText=new egret.TextField,this.titleText.width=1080,this.titleText.height=120,this.titleText.x=0,this.titleText.y=120,this.titleText.size=72,this.titleText.text=this.chapter_name,this.titleText.textColor=0,this.titleText.fontFamily="KaiTi",this.titleText.textAlign=egret.HorizontalAlign.CENTER,this.titleText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.titleText);for(var i in this._stage_map){var a=StageData.getStage(i),n=a.front_stage;if(null==n||LocalData.getStageData(n)==STAGE_DATA.FINISHED||LocalData.getStageData(n)==STAGE_DATA.SKIPPED){var r=this._stage_map[i];LocalData.getStageData(a)==STAGE_DATA.FINISHED?r.setTexture(TextureNames.STAGE_FINISHED):LocalData.getStageData(a)==STAGE_DATA.SKIPPED&&r.setTexture(TextureNames.STAGE_SKIPPED),r.setAction(t.createFunc(a,this)),this.addChild(r)}}var s=new Button(180,180,new egret.Point(660,1800)).setTexture(TextureNames.BUTTON_RETURN);s.setAction(t.click_return),this.addChild(s)},t.prototype.addStage=function(e,t,i){var a=new ButtonWithText(160,160,i,t).setTexture(TextureNames.STAGE_UNFINISHED);a.setColor(0),this._stage_map[e]=a},t.createFunc=function(e,t){var i=function(){ChooseStage.INSTANCE.setStage(e),t.addChild(ChooseStage.INSTANCE)};return i},t.click_return=function(e){var t=SelfMachine.INSTANCE.currentChapter;t.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(t.getReturnPage()),SelfMachine.INSTANCE.currentChapter=null},t.prototype.getReturnPage=function(){return this==StageData.chapter_tutorial||this==StageData.chapter_extra?ChooseMode.INSTANCE:this==StageData.chapter1h||this==StageData.chapter2h||this==StageData.chapter3h?ModeHard.INSTANCE:ModeEasy.INSTANCE},t}(PageBase);__reflect(PageChapter.prototype,"PageChapter");var PageDeveloperWords=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e),this.titleText=new egret.TextField,this.titleText.width=1080,this.titleText.height=120,this.titleText.x=0,this.titleText.y=60,this.titleText.size=72,this.titleText.text="开发者的话",this.titleText.textColor=0,this.titleText.fontFamily="KaiTi",this.titleText.textAlign=egret.HorizontalAlign.CENTER,this.titleText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.titleText),this.contentText=new egret.TextField,this.contentText.width=1e3,this.contentText.height=1320,this.contentText.x=40,this.contentText.y=300,this.contentText.size=48,this.contentText.textFlow=TextHelper.developer_text,this.contentText.textColor=0,this.contentText.strokeColor=16777215,this.contentText.stroke=2,this.contentText.fontFamily="KaiTi",this.contentText.textAlign=egret.HorizontalAlign.LEFT,this.contentText.verticalAlign=egret.VerticalAlign.TOP,this.addChild(this.contentText);var i=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.9*Main.Y),"返回");i.setAction(t.click_return),this.addChild(i)},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageAboutGame.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(PageDeveloperWords.prototype,"PageDeveloperWords");var PageGameInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e),this.titleText=new egret.TextField,this.titleText.width=1080,this.titleText.height=120,this.titleText.x=0,this.titleText.y=60,this.titleText.size=72,this.titleText.text="游戏信息",this.titleText.textColor=0,this.titleText.fontFamily="KaiTi",this.titleText.textAlign=egret.HorizontalAlign.CENTER,this.titleText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.titleText),this.contentText=new egret.TextField,this.contentText.width=1e3,this.contentText.height=1320,this.contentText.x=40,this.contentText.y=360,this.contentText.size=48,this.contentText.textFlow=TextHelper.game_info_text,this.contentText.textColor=0,this.contentText.strokeColor=16777215,this.contentText.stroke=2,this.contentText.fontFamily="KaiTi",this.contentText.textAlign=egret.HorizontalAlign.LEFT,this.contentText.verticalAlign=egret.VerticalAlign.TOP,this.addChild(this.contentText);var i=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.8*Main.Y),"返回");i.setAction(t.click_return),this.addChild(i)},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageAboutGame.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(PageGameInfo.prototype,"PageGameInfo");var PageHelp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e),this.titleText=new egret.TextField,this.titleText.width=1080,this.titleText.height=120,this.titleText.x=0,this.titleText.y=60,this.titleText.size=72,this.titleText.text="我是帮助界面",this.titleText.textColor=0,this.titleText.fontFamily="KaiTi",this.titleText.textAlign=egret.HorizontalAlign.CENTER,this.titleText.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.titleText),this.contentText=new egret.TextField,this.contentText.width=1e3,this.contentText.height=1320,this.contentText.x=40,this.contentText.y=360,this.contentText.size=48,this.contentText.textFlow=TextHelper.help_text,this.contentText.textColor=0,this.contentText.strokeColor=16777215,this.contentText.stroke=2,this.contentText.fontFamily="KaiTi",this.contentText.textAlign=egret.HorizontalAlign.LEFT,this.contentText.verticalAlign=egret.VerticalAlign.TOP,this.addChild(this.contentText);var i=new ButtonWithText(550,150,new egret.Point(540,1620),"返回");i.setAction(t.click_return),this.addChild(i)
},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageMain.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(PageHelp.prototype,"PageHelp");var PageMain=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.click_title_times=10,t}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t)},t.prototype.doRender=function(){this.click_title_times=10;var e=MyUtils.createBitmapByName(TextureNames.MAIN_PAGE);e.width=Main.X,e.height=Main.Y,e.alpha=1,this.addChild(e);var i=MyUtils.createBitmapByName(TextureNames.GAME_TITLE);i.width=720,i.height=240,i.alpha=1,i.x=180,i.y=400,i.touchEnabled=!0,this.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click_title,this);var a=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.5*Main.Y),"开始游戏");a.setAction(t.click_start),this.addChild(a);var n=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.65*Main.Y),"帮助");n.setAction(t.click_help),this.addChild(n);var r=new ButtonWithText(550,150,new egret.Point(.5*Main.X,.8*Main.Y),"关于游戏");r.setAction(t.click_about),this.addChild(r),LocalData.isFirstTime()&&MsgBox.showMsgBox(this,TextHelper.welcome_text)},t.click_title=function(e){--t.INSTANCE.click_title_times<=0&&(t.INSTANCE.click_title_times=10,SelfMachine.INSTANCE.UNDEAD=!SelfMachine.INSTANCE.UNDEAD,MsgBox.showMsgBox(t.INSTANCE,"作弊成功，当前自机无敌情况为："+SelfMachine.INSTANCE.UNDEAD))},t.click_start=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(ChooseMode.INSTANCE)},t.click_help=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageHelp.INSTANCE)},t.click_about=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(PageAboutGame.INSTANCE)},t.INSTANCE=new t,t}(PageBase);__reflect(PageMain.prototype,"PageMain");var ChooseStage=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setStage=function(e){this._stage=e},t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_SQUARE);i.width=600,i.height=600,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new egret.TextField;a.x=270,a.y=780,a.width=540,a.height=90,a.text=this._stage.title,a.size=64,a.textColor=0,a.fontFamily="KaiTi",a.bold=!0,a.textAlign=egret.HorizontalAlign.CENTER,a.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(a);var n=new Button(120,120,new egret.Point(360,1080)).setTexture(TextureNames.BUTTON_RETURN);n.setAction(t.click_return),this.addChild(n);var r=new Button(120,120,new egret.Point(540,1080)).setTexture(TextureNames.BUTTON_RESUME);r.setAction(t.click_start),this.addChild(r);var s=new Button(120,120,new egret.Point(720,1080)).setTexture(TextureNames.BUTTON_SKIP);s.setAction(t.click_skip),this.addChild(s)},t.click_return=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_start=function(e){t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(t.INSTANCE._stage)},t.click_skip=function(e){LocalData.setStageData(t.INSTANCE._stage,STAGE_DATA.SKIPPED),t.click_return(e)},t.INSTANCE=new t,t}(Popup);__reflect(ChooseStage.prototype,"ChooseStage");var Dead=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_DEAD);i.width=600,i.height=600,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new Button(120,120,new egret.Point(540,1140)).setTexture(TextureNames.BUTTON_RESTART);a.setAction(t.click_restart),this.addChild(a);var n=new Button(120,120,new egret.Point(720,1140)).setTexture(TextureNames.BUTTON_SKIP);n.setAction(t.click_skip),this.addChild(n);var r=new Button(120,120,new egret.Point(360,1140)).setTexture(TextureNames.BUTTON_RETURN);r.setAction(t.click_return),this.addChild(r)},t.click_skip=function(e){var i=SelfMachine.INSTANCE.currentStage;LocalData.setStageData(i,STAGE_DATA.SKIPPED),i.end(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_return=function(e){var i=SelfMachine.INSTANCE.currentStage;i.end(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_restart=function(e){t.INSTANCE.removeChildren(),t.INSTANCE.parent.removeChild(t.INSTANCE);var i=SelfMachine.INSTANCE.currentStage;i.restart()},t.INSTANCE=new t,t}(Popup);__reflect(Dead.prototype,"Dead");var Info=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_LONG);i.width=720,i.height=1080,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new egret.TextField;a.x=270,a.y=480,a.width=540,a.height=90,a.text="关卡提示",a.size=64,a.textColor=0,a.fontFamily="KaiTi",a.bold=!0,a.textAlign=egret.HorizontalAlign.CENTER,a.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(a);var n=SelfMachine.INSTANCE.currentStage,r=new egret.TextField;r.x=270,r.y=600,r.width=540,r.height=720,r.text=n.help_text,r.size=48,r.textColor=0,r.fontFamily="KaiTi",r.textAlign=egret.HorizontalAlign.LEFT,r.verticalAlign=egret.VerticalAlign.TOP,this.addChild(r);var s=new Button(120,120,new egret.Point(540,1320)).setTexture(TextureNames.BUTTON_RESUME);s.setAction(t.click_start),this.addChild(s)},t.click_start=function(e){t.INSTANCE.removeChildren(),t.INSTANCE.parent.removeChild(t.INSTANCE);var i=SelfMachine.INSTANCE.currentStage;i.state==StageState.BEFORE_RUNNING||i.state==StageState.END?i.restart():i.state==StageState.PAUSING&&i.resume()},t.INSTANCE=new t,t}(Popup);__reflect(Info.prototype,"Info");var MsgBox=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._text="",t._func=null,t}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_SQUARE);i.width=600,i.height=600,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new egret.TextField;a.x=300,a.y=760,a.width=480,a.height=380,a.text=this._text,a.size=48,a.textColor=0,a.fontFamily="KaiTi",a.textAlign=egret.HorizontalAlign.CENTER,a.verticalAlign=egret.VerticalAlign.TOP,this.addChild(a);var n=new Button(120,120,new egret.Point(540,1110)).setTexture(TextureNames.BUTTON_RESUME);n.setAction(t.click_start),this.addChild(n)},t.click_start=function(e){null!=t.INSTANCE._func&&(t.INSTANCE._func(),t.INSTANCE._func=null),t.INSTANCE.removeChildren(),null!=t.INSTANCE.parent?t.INSTANCE.parent.removeChild(t.INSTANCE):(Main.getMain().removeChildren(),Main.getMain().addChild(PageMain.INSTANCE))},t.setCustomAction=function(e){t.INSTANCE._func=e},t.showMsgBox=function(e,i){t.INSTANCE._text=i,e.addChild(t.INSTANCE)},t.INSTANCE=new t,t}(Popup);__reflect(MsgBox.prototype,"MsgBox");var Pause=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_PAUSE);i.width=600,i.height=600,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new Button(120,120,new egret.Point(360,1140)).setTexture(TextureNames.BUTTON_RESUME);a.setAction(t.click_resume),this.addChild(a);var n=new Button(120,120,new egret.Point(540,1140)).setTexture(TextureNames.BUTTON_RESTART);n.setAction(t.click_restart),this.addChild(n);var r=new Button(120,120,new egret.Point(720,1140)).setTexture(TextureNames.BUTTON_RETURN);r.setAction(t.click_return),this.addChild(r)},t.click_resume=function(e){try{t.INSTANCE.removeChildren(),t.INSTANCE.parent.removeChild(t.INSTANCE);var i=SelfMachine.INSTANCE.currentStage;i.resume()}catch(a){console.error(a)}},t.click_return=function(e){var i=SelfMachine.INSTANCE.currentStage;i.end(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_restart=function(e){t.INSTANCE.removeChildren(),t.INSTANCE.parent.removeChild(t.INSTANCE);var i=SelfMachine.INSTANCE.currentStage;i.restart()},t.INSTANCE=new t,t}(Popup);__reflect(Pause.prototype,"Pause");var Launcher=function(){function e(){this.arrayLogic=new Array,this._initial_pos=new egret.Point,this._current_pos=new egret.Point,SelfMachine.INSTANCE.currentStage.arrayLauncher.push(this)}return e.prototype.addLogic=function(e){return this.arrayLogic.push(e),this},e.prototype.start=function(){for(var e=0,t=this.arrayLogic;e<t.length;e++){var i=t[e];i.start()}},e.prototype.resume=function(){for(var e=0,t=this.arrayLogic;e<t.length;e++){var i=t[e];i.resume()}},e.prototype.pause=function(){for(var e=0,t=this.arrayLogic;e<t.length;e++){var i=t[e];i.pause()}},e.prototype.reset=function(){this.pause(),this._current_pos=this._initial_pos;for(var e=0,t=this.arrayLogic;e<t.length;e++){var i=t[e];i.reset()}},e.prototype.setDead=function(){this.pause(),MyUtils.removeObjectFromArray(this,SelfMachine.INSTANCE.currentStage.arrayLauncher)},e.prototype.setInitialPos=function(e){return this._initial_pos=e,this.setPos(e)},e.prototype.setPos=function(e){return this._current_pos=e,this.updateRender(),this},e.prototype.updateRender=function(){for(var e=0,t=this.arrayLogic;e<t.length;e++){var i=t[e];i instanceof RenderLogic&&i.updatePos()}},e.prototype.getPos=function(){return new egret.Point(this._current_pos.x,this._current_pos.y)},e.prototype.getX=function(){return this._current_pos.x},e.prototype.getY=function(){return this._current_pos.y},e}();__reflect(Launcher.prototype,"Launcher");var Win=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doRender=function(){e.prototype.doRender.call(this);var i=MyUtils.createBitmapByName(TextureNames.POPUP_WIN);i.width=600,i.height=600,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=Main.X/2,i.y=Main.Y/2,this.addChild(i);var a=new Button(120,120,new egret.Point(540,1140)).setTexture(TextureNames.BUTTON_RESTART);a.setAction(t.click_restart),this.addChild(a);var n=new Button(120,120,new egret.Point(720,1140)).setTexture(TextureNames.BUTTON_NEXT);n.setAction(t.click_next),this.addChild(n);var r=new Button(120,120,new egret.Point(360,1140)).setTexture(TextureNames.BUTTON_RETURN);r.setAction(t.click_return),this.addChild(r)},t.click_next=function(e){var i=SelfMachine.INSTANCE.currentStage;null!=i.next_stage&&(i.end(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(i.next_stage))},t.click_return=function(e){var i=SelfMachine.INSTANCE.currentStage;i.end(),t.INSTANCE.removeChildren(),Main.getMain().removeChildren(),Main.getMain().addChild(SelfMachine.INSTANCE.currentChapter)},t.click_restart=function(e){t.INSTANCE.removeChildren(),t.INSTANCE.parent.removeChild(t.INSTANCE);var i=SelfMachine.INSTANCE.currentStage;i.restart()},t.INSTANCE=new t,t}(Popup);__reflect(Win.prototype,"Win");var LauncherFactory=function(){function e(){}return e.normalLauncher=function(){return new Launcher},e.texturedLauncher=function(e,t,i){var a=new Launcher;return a.addLogic(new RenderLogic(a,e,t,i)),a},e}();__reflect(LauncherFactory.prototype,"LauncherFactory");var StageData=function(){function e(){}return e.init=function(){e.initChapters(),e.initStages(),e.addStageToChapters(),TextHelper.initStageText(),e.initRelations()},e.initChapters=function(){e.chapter_tutorial=new PageChapter("教程"),e.chapter_extra=new PageChapter("额外关卡"),e.chapter1=new PageChapter("第一章"),e.chapter2=new PageChapter("第二章"),e.chapter3=new PageChapter("第三章"),e.chapter1h=new PageChapter("第一章 困难"),e.chapter2h=new PageChapter("第二章 困难"),e.chapter3h=new PageChapter("第三章 困难"),ModeEasy.INSTANCE.addChapter(e.chapter1,new egret.Point(.5*Main.X,.2*Main.Y)),ModeEasy.INSTANCE.addChapter(e.chapter2,new egret.Point(.5*Main.X,.4*Main.Y)),ModeEasy.INSTANCE.addChapter(e.chapter3,new egret.Point(.5*Main.X,.6*Main.Y)),ModeHard.INSTANCE.addChapter(e.chapter1h,new egret.Point(.5*Main.X,.2*Main.Y)),ModeHard.INSTANCE.addChapter(e.chapter2h,new egret.Point(.5*Main.X,.4*Main.Y)),ModeHard.INSTANCE.addChapter(e.chapter3h,new egret.Point(.5*Main.X,.6*Main.Y))},e.initStages=function(){e.tutorial1=new Tutorial1,e.tutorial2=new Tutorial2,e.tutorial3=new Tutorial3,e.tutorial4=new Tutorial4,e.tutorial5=new Tutorial5,e.tutorial6=new Tutorial6,e.stage1_1=new C1S1,e.stage1_2=new C1S2,e.stage1_3=new C1S3,e.stage1_4=new C1S4,e.stage1_5=new C1S5,e.stage1_6=new C1S6,e.stage1_7=new C1S7,e.stage2_1=new C2S1,e.stage2_2=new C2S2,e.stage2_3=new C2S3,e.stage2_4=new C2S4,e.stage2_5=new C2S5,e.stage2_6=new C2S6,e.stage2_7=new C2S7,e.stage3_1=new C3S1,e.stage3_2=new C3S2,e.stage3_3=new C3S3,e.stage3_4=new C3S4,e.stage3_5=new C3S5,e.stage3_6=new C3S6,e.stage3_7=new C3S7,e.stage1_1h=new C1S1H,e.stage1_2h=new C1S2H,e.stage1_3h=new C1S3H,e.stage1_4h=new C1S4H,e.stage1_5h=new C1S5H,e.stage1_6h=new C1S6H,e.stage1_7h=new C1S7H,e.stage2_1h=new C2S1H,e.stage2_2h=new C2S2H,e.stage2_3h=new C2S3H,e.stage2_4h=new C2S4H,e.stage2_5h=new C2S5H,e.stage2_6h=new C2S6H,e.stage2_7h=new C2S7H,e.stage3_1h=new C3S1H,e.stage3_2h=new C3S2H,e.stage3_3h=new C3S3H,e.stage3_4h=new C3S4H,e.stage3_5h=new C3S5H,e.stage3_6h=new C3S6H,e.stage3_7h=new C3S7H,e.stageEX_1=new CEXS1,e.stageEX_2=new CEXS2,e.stageEX_3=new CEXS3,e.stageEX_4=new CEXS4,e.stageEX_5=new CEXS5,e.stageEX_6=new CEXS6,e.test=new Test},e.addStageToChapters=function(){e.chapter_tutorial.addStage("tut1","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter_tutorial.addStage("tut2","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter_tutorial.addStage("tut3","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter_tutorial.addStage("tut4","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter_tutorial.addStage("tut5","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter_tutorial.addStage("tut6","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter1.addStage("c1s1","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter1.addStage("c1s2","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter1.addStage("c1s3","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter1.addStage("c1s4","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter1.addStage("c1s5","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter1.addStage("c1s6","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter1.addStage("c1s7","ex",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter2.addStage("c2s1","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter2.addStage("c2s2","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter2.addStage("c2s3","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter2.addStage("c2s4","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter2.addStage("c2s5","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter2.addStage("c2s6","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter2.addStage("c2s7","ex",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter3.addStage("c3s1","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter3.addStage("c3s2","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter3.addStage("c3s3","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter3.addStage("c3s4","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter3.addStage("c3s5","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter3.addStage("c3s6","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter3.addStage("c3s7","EX",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter_extra.addStage("cexs1","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter_extra.addStage("cexs2","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter_extra.addStage("cexs3","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter_extra.addStage("cexs4","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter_extra.addStage("cexs5","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter_extra.addStage("cexs6","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter_extra.addStage("test","T",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter1h.addStage("c1s1h","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter1h.addStage("c1s2h","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter1h.addStage("c1s3h","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter1h.addStage("c1s4h","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter1h.addStage("c1s5h","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter1h.addStage("c1s6h","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter1h.addStage("c1s7h","EX",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter2h.addStage("c2s1h","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter2h.addStage("c2s2h","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter2h.addStage("c2s3h","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter2h.addStage("c2s4h","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter2h.addStage("c2s5h","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter2h.addStage("c2s6h","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter2h.addStage("c2s7h","EX",new egret.Point(.5*Main.X,.55*Main.Y)),e.chapter3h.addStage("c3s1h","1",new egret.Point(.25*Main.X,.25*Main.Y)),e.chapter3h.addStage("c3s2h","2",new egret.Point(.5*Main.X,.25*Main.Y)),e.chapter3h.addStage("c3s3h","3",new egret.Point(.75*Main.X,.25*Main.Y)),e.chapter3h.addStage("c3s4h","4",new egret.Point(.25*Main.X,.4*Main.Y)),e.chapter3h.addStage("c3s5h","5",new egret.Point(.5*Main.X,.4*Main.Y)),e.chapter3h.addStage("c3s6h","6",new egret.Point(.75*Main.X,.4*Main.Y)),e.chapter3h.addStage("c3s7h","EX",new egret.Point(.5*Main.X,.55*Main.Y))},e.initRelations=function(){e.chapter2.front_stage=e.stage1_6,e.chapter3.front_stage=e.stage2_6,e.chapter1h.front_stage=e.stage1_6,e.chapter2h.front_stage=e.stage2_6,e.chapter3h.front_stage=e.stage3_6,e.chapter_extra.front_stage=e.stage1_6,e.tutorial1.next_stage=e.tutorial2,e.tutorial2.next_stage=e.tutorial3,e.tutorial3.next_stage=e.tutorial4,e.tutorial4.next_stage=e.tutorial5,e.tutorial5.next_stage=e.tutorial6,e.stage1_1.next_stage=e.stage1_2,e.stage1_2.next_stage=e.stage1_3,e.stage1_3.next_stage=e.stage1_4,e.stage1_4.next_stage=e.stage1_5,e.stage1_5.next_stage=e.stage1_6,e.stage1_6.next_stage=e.stage1_7,e.stage1_2.front_stage=e.stage1_1,e.stage1_3.front_stage=e.stage1_2,e.stage1_4.front_stage=e.stage1_3,e.stage1_5.front_stage=e.stage1_4,e.stage1_6.front_stage=e.stage1_5,e.stage1_7.front_stage=e.stage1_6,e.stage2_1.next_stage=e.stage2_2,e.stage2_2.next_stage=e.stage2_3,e.stage2_3.next_stage=e.stage2_4,e.stage2_4.next_stage=e.stage2_5,e.stage2_5.next_stage=e.stage2_6,e.stage2_6.next_stage=e.stage2_7,e.stage2_2.front_stage=e.stage2_1,e.stage2_3.front_stage=e.stage2_2,e.stage2_4.front_stage=e.stage2_3,e.stage2_5.front_stage=e.stage2_4,e.stage2_6.front_stage=e.stage2_5,e.stage2_7.front_stage=e.stage2_6,e.stage3_1.next_stage=e.stage3_2,e.stage3_2.next_stage=e.stage3_3,e.stage3_3.next_stage=e.stage3_4,e.stage3_4.next_stage=e.stage3_5,e.stage3_5.next_stage=e.stage3_6,e.stage3_6.next_stage=e.stage3_7,e.stage3_2.front_stage=e.stage3_1,e.stage3_3.front_stage=e.stage3_2,e.stage3_4.front_stage=e.stage3_3,e.stage3_5.front_stage=e.stage3_4,e.stage3_6.front_stage=e.stage3_5,e.stage3_7.front_stage=e.stage3_6},e.getStage=function(t){for(var i=0,a=e.arrayStage;i<a.length;i++){var n=a[i];if(n.getUniqueID()==t)return n}return null},e.registerStage=function(t){e.arrayStage.push(t)},e.arrayChapter=new Array,e.arrayStage=new Array,e}();__reflect(StageData.prototype,"StageData");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var C1S1=function(e){function t(){return e.call(this,"c1s1",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.2*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new Sniper(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setNumber(7).setStep(15).setDiv(1).setFreq(300));var i=new egret.Point(.4*Main.X,300),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(i);a.addLogic(new Sniper(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setNumber(7).setStep(15).setDiv(1).setFreq(300));var n=new egret.Point(.6*Main.X,300),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(n);r.addLogic(new Sniper(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setNumber(7).setStep(15).setDiv(1).setFreq(300));var s=new egret.Point(.8*Main.X,300),o=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(s);o.addLogic(new Sniper(o,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setNumber(7).setStep(15).setDiv(1).setFreq(300))},t}(StageTutorial);__reflect(C1S1.prototype,"C1S1");var C1S2=function(e){function t(){return e.call(this,"c1s2",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(12)).setFreq(750).setStartAngle(45).setStep(9).setNumber(11));var i=new egret.Point(108,420),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120).setInitialPos(i);a.addLogic(new Sniper(a,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(25).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(250).setDelay(1e3));var n=new egret.Point(324,360),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120).setInitialPos(n);r.addLogic(new Sniper(r,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(25).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(250).setDelay(1e3));var s=new egret.Point(756,360),o=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120).setInitialPos(s);o.addLogic(new Sniper(o,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(25).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(250).setDelay(1e3));var l=new egret.Point(972,420),c=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120).setInitialPos(l);c.addLogic(new Sniper(c,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(25).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(250).setDelay(1e3))},t}(StageBase);__reflect(C1S2.prototype,"C1S2");var C1S3=function(e){function t(){return e.call(this,"c1s3",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(12)).setFreq(500).setStartAngle(0).setStep(15).setNumber(24).setPeriod(24));var i=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);i.addLogic(new AroundLauncher(i,t,7500,240).setTheta(0)),i.addLogic(new Sniper(i,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(5).setStep(72).setDiv(.5).setFreq(500));var a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);a.addLogic(new AroundLauncher(a,t,7500,240).setTheta(2/3*Math.PI)),a.addLogic(new Sniper(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(5).setStep(72).setDiv(.5).setFreq(500));var n=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);n.addLogic(new AroundLauncher(n,t,7500,240).setTheta(4/3*Math.PI)),n.addLogic(new Sniper(n,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(5).setStep(72).setDiv(.5).setFreq(500));var r=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);r.addLogic(new AroundLauncher(r,t,7500,240).setTheta(1/3*Math.PI).setClockwise(!1)),r.addLogic(new Sniper(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(6).setStep(60).setDiv(.5).setFreq(500));var s=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);s.addLogic(new AroundLauncher(s,t,7500,240).setTheta(1*Math.PI).setClockwise(!1)),s.addLogic(new Sniper(s,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(6).setStep(60).setDiv(.5).setFreq(500));var o=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);o.addLogic(new AroundLauncher(o,t,7500,240).setTheta(5/3*Math.PI).setClockwise(!1)),o.addLogic(new Sniper(o,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(6).setStep(60).setDiv(.5).setFreq(500))},t}(StageBase);__reflect(C1S3.prototype,"C1S3");var LocalData=function(){function e(){}return e.getStageData=function(t){var i="stage"+t.getUniqueID();switch(egret.localStorage.getItem(i)){case e.FINISHED:return STAGE_DATA.FINISHED;case e.SKIPPED:return STAGE_DATA.SKIPPED;case e.UNFINISHED:return STAGE_DATA.UNFINISHED;default:return egret.localStorage.setItem(i,e.UNFINISHED),STAGE_DATA.UNFINISHED}},e.data2str=function(t){switch(t){case STAGE_DATA.UNFINISHED:return e.UNFINISHED;case STAGE_DATA.SKIPPED:return e.SKIPPED;case STAGE_DATA.FINISHED:return e.FINISHED;default:return null}},e.setStageData=function(t,i){var a="stage"+t.getUniqueID();egret.localStorage.setItem(a,e.data2str(i))},e.isFirstTime=function(){return"no"!=egret.localStorage.getItem("first_time")?(egret.localStorage.setItem("first_time","no"),!0):!1},e.clear=function(){egret.localStorage.clear()},e.UNFINISHED="UNFINISHED",e.SKIPPED="SKIPPED",e.FINISHED="FINISHED",e}();__reflect(LocalData.prototype,"LocalData");var STAGE_DATA;!function(e){e[e.UNFINISHED=0]="UNFINISHED",e[e.FINISHED=1]="FINISHED",e[e.SKIPPED=2]="SKIPPED"}(STAGE_DATA||(STAGE_DATA={}));var C1S5=function(e){function t(){return e.call(this,"c1s5",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(15)).setFreq(500).setStartAngle(0).setStep(30).setNumber(12).setPeriod(-20));var i=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(new egret.Point(3e3,3e3));i.addLogic(new CustomPath(i,function(e){return 40>e%80?new egret.Point(240+300*Math.random(),120*Math.random()+480):new egret.Point(840-300*Math.random(),120*Math.random()+480)}).setFreq(2e3).resetPos(!1)),i.addLogic(new CustomShooter(i,function(e){var t=MissileUtils.getSniperAngle(e.getPos()),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(30*Math.cos(t),30*Math.sin(t));i.addToStage();for(var a=1;10>=a;a++)for(var n=0;10>=n;n++){var t=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(2)*a*(1-.2*n),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(.01*Math.cos(t),.01*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(30)}).setStartTicks(2*a).setTriggerTimes(1));i.addToStage()}}).setFreq(2e3))},t}(StageBase);__reflect(C1S5.prototype,"C1S5");var C1S6=function(e){function t(){return e.call(this,"c1s6",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,240,270).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(250).setStartAngle(0).setStep(60).setNumber(6).setPeriod(12)),t.addLogic(new CustomShooter(t,function(e){for(var t=MyUtils.ang2rad(30+30*Math.random()),i=function(i){var a=20+15*i,n=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER1).setPos(e.getPos()).setVelocity(a*Math.cos(t),a*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-a/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;18>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(20*t+4*Math.random()-2),a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(30*Math.cos(i),30*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(30));a.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1));n.addToStage()},a=0;3>a;a++)i(a)}).setFreq(1e3)),t.addLogic(new CustomShooter(t,function(e){for(var t=MyUtils.ang2rad(120+30*Math.random()),i=function(i){var a=20+15*i,n=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER2).setPos(e.getPos()).setVelocity(a*Math.cos(t),a*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-a/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;9>t;t++){var i=2*Math.random()*Math.PI,a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setPos(e.getPos()).setVelocity(30*Math.cos(i),30*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(30));a.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1));n.addToStage()},a=0;3>a;a++)i(a)}).setFreq(1e3).setDelay(500))},t}(StageBase);__reflect(C1S6.prototype,"C1S6");var C1S7=function(e){function t(){return e.call(this,"c1s7",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),i=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,250,200).setInitialPos(e);i.addLogic(new Flash(i,240,840,480,720).setFreq(2400).setDelay(2350)),i.addLogic(new CustomShooter(i,function(e){for(var i=360*Math.random(),a=i;i+360>a;a+=15){var n=MyUtils.ang2rad(a),r=(new EllipticalMissile).setTexture(t.randomTexture()).setSize(30,36).setPos(e.getPos()).setVelocity(14*Math.cos(n),14*Math.sin(n));r.addToStage()}}).setFreq(600)),i.addLogic(new CustomShooter(i,function(e){for(var i=2*Math.PI*Math.random(),a=t.randomTexture2(),n=function(n){for(var r=12+6*n,s=0;7>s;s++){var o=(new RoundMissile).setSize(32,32).setTexture(a).setPos(e.getPos()).setVelocity(r*Math.cos(i+s*Math.PI/12),r*Math.sin(i+s*Math.PI/12)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-r/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){var i=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(30*Math.cos(i),30*Math.sin(i)),e.setTexture(t.nextTexture(e.getTexture()))}).setStartTicks(20).setTriggerTimes(1)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setStartTicks(20).setTriggerTimes(30)).addHandler(new TickEventHandler(function(e){var i=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(20*Math.cos(i),20*Math.sin(i)),e.setTexture(t.nextTexture(e.getTexture()))
}).setStartTicks(50).setTriggerTimes(1));o.addToStage()}},r=0;3>r;r++)n(r)}).setFreq(800).setDelay(2e3))},t.randomTexture=function(){var e=Math.random();return 1/3>e?TextureNames.MISSILE_PETAL1:2/3>e?TextureNames.MISSILE_PETAL2:TextureNames.MISSILE_PETAL3},t.randomTexture2=function(){var e=Math.random();return 1/3>e?TextureNames.MISSILE_RED:2/3>e?TextureNames.MISSILE_BLUE:TextureNames.MISSILE_GREEN},t.nextTexture=function(e){return e==TextureNames.MISSILE_RED?TextureNames.MISSILE_BLUE:e==TextureNames.MISSILE_BLUE?TextureNames.MISSILE_GREEN:TextureNames.MISSILE_RED},t}(StageBase);__reflect(C1S7.prototype,"C1S7");var C2S1=function(e){function t(){return e.call(this,"c2s1",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setFreq(250).setStartAngle(0).setStep(30).setNumber(12).setPeriod(-20)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(30))).setDelay(1e3).setStartAngle(0).setNumber(36).setStep(10).setFreq(1e3))},t}(StageBase);__reflect(C2S1.prototype,"C2S1");var C2S2=function(e){function t(){return e.call(this,"c2s2",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(12).addHandler(new TickEventHandler(function(e){for(var t=0;12>t;t++){var i=t/12*2*Math.PI,a=(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setPos(e.getPos()).setVelocity(e.getVelocityX(),e.getVelocityY()).addVelocity(4*Math.cos(i),4*Math.sin(i));a.addToStage()}e.setDead()}).setStartTicks(1).setTriggerTimes(1))).setFreq(500).setStartAngle(0).setStep(120).setNumber(3).setPeriod(-5*Math.E)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(15)).setFreq(250).setStartAngle(60).setStep(120).setNumber(3).setPeriod(-5*Math.E))},t}(StageBase);__reflect(C2S2.prototype,"C2S2");var C2S3=function(e){function t(){return e.call(this,"c2s3",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge(),i=MyUtils.createReasonablePos(e.getPos());t==Side.LEFT||t==Side.RIGHT?(e.setPos(i),e.setVelocityX(-e.getVelocityX()),e.setTotalVelocity(12),e.setTexture(TextureNames.MISSILE_PETAL1)):t==Side.TOP?(e.setPos(i),e.setVelocityY(-e.getVelocityY()),e.setTotalVelocity(12),e.setTexture(TextureNames.MISSILE_PETAL1)):e.setDead()}))).setFreq(100).setStartAngle(0).setNumber(1).setPeriod(Math.E))},t}(StageBase);__reflect(C2S3.prototype,"C2S3");var C2S4=function(e){function t(){return e.call(this,"c2s4",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(10)).setFreq(250).setStartAngle(0).setStep(45).setNumber(8).setPeriod(Math.exp(3))),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(10)).setFreq(250).setStartAngle(0).setStep(45).setNumber(8).setPeriod(-Math.exp(3))),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(40).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(30))).setDelay(2400).setNumber(32).setStep(11.25).setFreq(800)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(5).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(30))).setDelay(2600).setStartAngle(5.625).setNumber(32).setStep(11.25).setFreq(800))},t}(StageBase);__reflect(C2S4.prototype,"C2S4");var C2S5=function(e){function t(){return e.call(this,"c2s5",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(25)).setFreq(1e3).setStartAngle(85).setStep(3).setNumber(91)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(25)).setFreq(1e3).setDelay(500).setStartAngle(95).setStep(-3).setNumber(91))},t}(StageBase);__reflect(C2S5.prototype,"C2S5");var C2S6=function(e){function t(){return e.call(this,"c2s6",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(12)).setNumber(6).setStartAngle(30).setStep(60).setPeriod(Math.PI).setFreq(200)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(12)).setNumber(6).setStartAngle(30).setStep(60).setPeriod(-Math.PI).setFreq(200)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20.01).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setStartTicks(30))).setNumber(36).setStep(10).setFreq(1e3).setPeriod(72))},t}(StageBase);__reflect(C2S6.prototype,"C2S6");var C2S7=function(e){function t(){return e.call(this,"c2s7",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,200,200).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(18)).setFreq(200).setStartAngle(-30).setStep(12).setNumber(16).setPeriod(4.5)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL2).setSize(30,36).setTotalVelocity(25)).setFreq(150).setDelay(4e3).setStartAngle(0).setStep(10).setNumber(5).setPeriod(-1.5)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setSize(256,256).setBottomLayer(!0).setTotalVelocity(16).addHandler(new TickEventHandler(function(e){e.rotate(9)}))).setFreq(400).setDelay(8e3).setStartAngle(0).setNumber(1).setPeriod(-2.5)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(14)).setFreq(100).setDelay(12e3).setStartAngle(0).setStep(6).setNumber(2).setPeriod(3))},t}(StageBase);__reflect(C2S7.prototype,"C2S7");var C3S1=function(e){function t(){return e.call(this,"c3s1",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setTotalVelocity(10).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.LEFT?e.setPosX(e.getX()+Main.X):t==Side.RIGHT?e.setPosX(e.getX()-Main.X):e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(5).setExtraVelocity(5))},t}(StageBase);__reflect(C3S1.prototype,"C3S1");var C3S2=function(e){function t(){return e.call(this,"c3s2",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_HAIL).setTotalVelocity(6).addHandler(new TickEventHandler(function(e){var t=e.getVelocity()+2*Math.random()-1;t=Math.max(t,1),t=Math.min(t,12),e.setTotalVelocity(t)}))).setFreq(50).setStartAngle(85).setEndAngle(95).setNumber(1))},t}(StageBase);__reflect(C3S2.prototype,"C3S2");var C3S3=function(e){function t(){return e.call(this,"c3s3",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setTotalVelocity(10).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.LEFT?e.setPosX(e.getX()+Main.X):t==Side.RIGHT?e.setPosX(e.getX()-Main.X):e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(3).setExtraVelocity(5));var t=new egret.Point(540,540),i=LauncherFactory.normalLauncher().setInitialPos(t);i.addLogic(new Scatter(i,(new RoundMissile).setSize(128,128).setTexture(TextureNames.MISSILE_GREEN).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;12>t;t++){var i=2*Math.random()*Math.PI,a=6+6*Math.random(),n=(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setPos(e.getPos()).setVelocity(a*Math.cos(i),a*Math.sin(i));n.addToStage()}e.setDead()}).setStartTicks(40).setTriggerTimes(1))).setNumber(12).setStep(30).setFreq(3e3))},t}(StageBase);__reflect(C3S3.prototype,"C3S3");var C3S4=function(e){function t(){return e.call(this,"c3s4",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomShooter(e,function(e){for(var t=0;t++<4;){var i=MissileUtils.createEdgePoint(),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_BLUE).setPos(i).addHandler(new TickEventHandler(function(e){var t=540-e.getX(),i=900-e.getY(),a=Math.sqrt(t*t+i*i);return 8>a?void e.setDead():(e.setVelocity(12*t/a,12*i/a),void e.addVelocity(.04*i,-.04*t))}));a.addToStage()}}).setFreq(100))},t}(StageBase);__reflect(C3S4.prototype,"C3S4");var C3S5=function(e){function t(){return e.call(this,"c3s5",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(5)).setSide(Side.LEFT).setFreq(500).setStartAngle(0).setEndAngle(0).setNumber(3).setExtraVelocity(10)),e.addLogic(new SideShooter(e,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(5)).setSide(Side.RIGHT).setFreq(500).setStartAngle(180).setEndAngle(180).setNumber(3).setExtraVelocity(10))},t}(StageBase);__reflect(C3S5.prototype,"C3S5");var C3S6=function(e){function t(){return e.call(this,"c3s6",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomShooter(e,function(e){var i=t.initRandomMissile();i.addToStage()}).setFreq(300))},t.initRandomMissile=function(){var e=3*Math.random(),t=null;return 1>=e?t=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER1).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,10+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;9>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(40*t),a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(10*Math.cos(i),10*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+.5)}).setTriggerTimes(40));a.addToStage()}e.setDead()}).setStartTicks(30).setTriggerTimes(1)):2>=e?t=(new EllipticalMissile).setSize(80,120).setTexture(TextureNames.FLOWER3).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,15+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;12>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(30*t),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_LIANZI).setPos(e.getPos()).setVelocity(40*Math.cos(i),40*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(30));a.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1)):3>=e&&(t=(new EllipticalMissile).setSize(90,100).setTexture(TextureNames.FLOWER8).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,5+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;18>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(20*t),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_PETAL4).setPos(e.getPos()).setVelocity(15*Math.cos(i),15*Math.sin(i));a.addToStage()}e.setDead()}).setStartTicks(40).setTriggerTimes(1))),t},t}(StageBase);__reflect(C3S6.prototype,"C3S6");var C3S7=function(e){function t(){return e.call(this,"c3s7",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomPath(e,function(e){return 8>e%16?new egret.Point(90+450*Math.random(),180*Math.random()+Main.UPPER_Y):new egret.Point(990-450*Math.random(),180*Math.random()+Main.UPPER_Y)}).setFreq(400)),e.addLogic(new Scatter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_RING_RED).setSize(600,600).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){var t=Math.max(e.getWidth()-7,180);e.resize(t,t),e.rotate(9)}).setTriggerTimes(100))).setFreq(400).setStartAngle(90).setNumber(1)),e.addLogic(new Scatter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(15)).setFreq(400).setStartAngle(0).setStep(10).setNumber(36))},t}(StageBase);__reflect(C3S7.prototype,"C3S7");var CEXS1=function(e){function t(){return e.call(this,"cexs1",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,690),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new CustomShooter(t,function(e){for(var t=0;7>t;t++){var i=30,a=SelfMachine.INSTANCE.currentStage.getCurrentTick()/20,n=2*t*Math.PI/7+a*a,r=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(i*Math.cos(n),i*Math.sin(n));r.addToStage()}}).setFreq(50))},t}(StageTutorial);__reflect(CEXS1.prototype,"CEXS1");var CEXS2=function(e){function t(){return e.call(this,"cexs2",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomShooter(e,function(e){var i=(new RoundMissile).setSize(32,32).setTexture(TextureNames.MISSILE_BLUE).setPos(t.createPos()).setVelocity(0,0).addHandler(new TickEventHandler(function(e){e.setTexture(TextureNames.MISSILE_HAIL);var t=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(5*Math.cos(t),5*Math.sin(t))}).setStartTicks(20).setTriggerTimes(1)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+.5)}).setStartTicks(20)).addHandler(new EdgeEventHandler(function(e){for(var t=MyUtils.createReasonablePos(e.getPos()),i=e.getDirection()-Math.PI,a=0;a<2*Math.PI;a+=2*Math.PI/16){var n=(new RoundMissile).setSize(24,24).setTexture(TextureNames.MISSILE_HAIL).setPos(t).setVelocity(18*Math.cos(i+a),18*Math.sin(i+a));n.addToStage()}e.setDead()}));i.addToStage()}).setFreq(400)),e.addLogic(new CustomShooter(e,function(e){for(var t=function(e){var t=2*Math.random()*Math.PI,i=new egret.Point(540+480*Math.cos(t),960+480*Math.sin(t)),a=(Math.random()-.5)*Math.PI+t,n=(new RoundMissile).setSize(24,24).setTexture(TextureNames.MISSILE_BLUE).setPos(i).setTotalVelocity(0).addHandler(new TickEventHandler(function(e){e.setTexture(TextureNames.MISSILE_HAIL),e.setVelocity(20*Math.cos(a),20*Math.sin(a))}).setStartTicks(8).setTriggerTimes(1));n.addToStage()},i=0;32>i;i++)t(i)}).setFreq(200))},t.createPos=function(){for(;;){var e=Math.random()*Main.X,t=Math.random()*(Main.BELOW_Y-Main.UPPER_Y)+Main.UPPER_Y,i=e-540,a=t-960;if(Math.sqrt(i*i+a*a)>=480)return new egret.Point(e,t)}},t}(StageBase);__reflect(CEXS2.prototype,"CEXS2");var CEXS3=function(e){function t(){return e.call(this,"cexs3",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){for(var e=function(e){var t=SelfMachine.INSTANCE.currentStage.getCurrentTick(),i=t-t%200;if(!(t%200>100)){var a,n=10+10*Math.random(),r=e.getX()-540,s=e.getY()-900;a=0==r?s>=0?Math.PI/2:-Math.PI/2:r>0?Math.atan(s/r):Math.atan(s/r)+Math.PI;var o=a+(2*Math.random()-1)*MyUtils.ang2rad(5),l=(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setPos(e.getPos()).setVelocity(n*Math.cos(o),n*Math.sin(o)).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge(),i=MyUtils.createReasonablePos(e.getPos());t==Side.LEFT||t==Side.RIGHT?(e.setPos(i),e.setVelocityX(-e.getVelocityX())):(e.setPos(i),e.setVelocityY(-e.getVelocityY()))}).setTriggerTimes(2)).addHandler(new TickEventHandler(function(e){SelfMachine.INSTANCE.currentStage.getCurrentTick()==i+100&&(e.setTotalVelocity(-.8*e.getVelocity()),e.setTexture(TextureNames.MISSILE_STANDARD))})).addHandler(new TickEventHandler(function(e){if(SelfMachine.INSTANCE.currentStage.getCurrentTick()>=i+100){var t=.99*e.getVelocity();t>4?e.setTotalVelocity(t):e.setDead()}}));l.addToStage()}},t=function(t){var i=t/6*2*Math.PI,a=LauncherFactory.texturedLauncher(TextureNames.MISSILE_BLUE,64,64).setInitialPos(new egret.Point(540+300*Math.cos(i),900+300*Math.sin(i)));a.addLogic(new CustomPath(a,function(e){var t=i-Math.abs(e%200-100)*MyUtils.ang2rad(1.8);return new egret.Point(540+300*Math.cos(t),900+300*Math.sin(t))})),a.addLogic(new CustomShooter(a,e).setFreq(100))},i=0;6>i;i++)t(i)},t}(StageBase);__reflect(CEXS3.prototype,"CEXS3");var CEXS4=function(e){function t(){return e.call(this,"cexs4",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,720),i=LauncherFactory.texturedLauncher(TextureNames.MISSILE_RING,160,160).setInitialPos(e);i.addLogic(new CustomShooter(i,function(e){var i=SelfMachine.INSTANCE.currentStage.getCurrentTick(),a=(i-i%64)/64;t.createLine(240,0+45*a,!0),t.createLine(300,0+45*a,!0),t.createLine(360,0+45*a,!1),t.createLine(240,45+45*a,!0),t.createLine(300,45+45*a,!0),t.createLine(360,45+45*a,!0),t.createLine(240,90+45*a,!1),t.createLine(300,90+45*a,!0),t.createLine(360,90+45*a,!1),t.createLine(240,135+45*a,!1),t.createLine(300,135+45*a,!1),t.createLine(360,135+45*a,!0),t.createLine(240,180+45*a,!0),t.createLine(300,180+45*a,!1),t.createLine(360,180+45*a,!1),t.createLine(240,225+45*a,!1),t.createLine(300,225+45*a,!0),t.createLine(360,225+45*a,!0),t.createLine(240,270+45*a,!0),t.createLine(300,270+45*a,!1),t.createLine(360,270+45*a,!0),t.createLine(240,315+45*a,!1),t.createLine(300,315+45*a,!1),t.createLine(360,315+45*a,!1)}).setFreq(3200))},t.createLine=function(e,i,a){i=MyUtils.ang2rad(i);for(var n=SelfMachine.INSTANCE.currentStage.getCurrentTick(),r=n%128>=32,s=function(n){if(!a&&n>=7&&13>=n)return"continue";var s=t.getRelativePoint(e,i,160,n),o=Math.sqrt(s.x*s.x+s.y*s.y)/5/10,l=(new RoundMissile).setTexture(TextureNames.MISSILE_STANDARD).setPos(new egret.Point(540,720)).setVelocity(s.x/5,s.y/5).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-o)}).setTriggerTimes(10)).addHandler(new TickEventHandler(function(a){var s=a.getLife()-20,o=t.getRelativePoint(e+4*s,r?i+s*MyUtils.ang2rad(4):i-s*MyUtils.ang2rad(5),160+3*s,n),l=540+o.x-a.getX(),c=720+o.y-a.getY();a.setVelocity(l,c)}).setStartTicks(20)).addHandler(new EdgeEventHandler(function(e){})).addHandler(new TickEventHandler(function(e){var t=540-e.getX(),i=720-e.getY(),a=Math.sqrt(t*t+i*i);return a>1140?void e.setDead():void(e.getY()<Main.UPPER_Y?e.resize(0,0):24!=e.getWidth()&&e.resize(24,24))}));l.addToStage()},o=0;20>=o;o++)s(o)},t.getRelativePoint=function(e,t,i,a){var n=e*Math.cos(t),r=e*Math.sin(t),s=n+i*Math.sin(t)*(2*a-20)/40,o=r-i*Math.cos(t)*(2*a-20)/40;return new egret.Point(s,o)},t}(StageBase);__reflect(CEXS4.prototype,"CEXS4");var CEXS5=function(e){function t(){return e.call(this,"cexs5",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,840),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_STANDARD).setTotalVelocity(15)).setFreq(250).setStartAngle(0).setStep(120).setNumber(3).setPeriod(24));var i=LauncherFactory.normalLauncher();i.addLogic(new CustomShooter(i,function(e){for(var t=0;16>t;t++){var i=t/8*Math.PI,a=new egret.Point(SelfMachine.INSTANCE.getX()+120*Math.cos(i),SelfMachine.INSTANCE.getY()+120*Math.sin(i)),n=(new RoundMissile).setTexture(t%2==0?TextureNames.MISSILE_RED:TextureNames.MISSILE_BLUE).setPos(a).setVelocity(2*Math.cos(i),2*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(-20)}).setStartTicks(20).setTriggerTimes(1)).addHandler(new TickEventHandler(function(e){e.setDead()}).setStartTicks(25).setTriggerTimes(1));n.addToStage()}var r=(new RoundMissile).setRadius(0).setTexture(TextureNames.MISSILE_RING_RED).setPos(SelfMachine.INSTANCE.getPos()).addHandler(new TickEventHandler(function(e){e.ignoreCollideCheck=!1;for(var t=0;160>t;t++){var i=2*Math.random()*Math.PI,a=5+20*Math.random(),n=(new RoundMissile).setTexture(t%2==0?TextureNames.MISSILE_RED:TextureNames.MISSILE_BLUE).setPos(e.getPos()).setVelocity(a*Math.cos(i),a*Math.sin(i));n.addToStage()}}).setStartTicks(25).setTriggerTimes(1)).addHandler(new TickEventHandler(function(e){var t=e.getWidth()+20;e.resize(t,t)}).setStartTicks(20).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){e.rotate(18)}).setStartTicks(20).setTriggerTimes(80)).addHandler(new TickEventHandler(function(e){e.setDead()}).setStartTicks(80).setTriggerTimes(1));r.ignoreCollideCheck=!0,r.addToStage()}).setFreq(2e3))},t}(StageBase);__reflect(CEXS5.prototype,"CEXS5");var CEXS6=function(e){function t(){return e.call(this,"cexs6",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomShooter(e,function(e){var i=SelfMachine.INSTANCE.currentStage.getCurrentTick(),a=i%100>=25,n=(new RoundMissile).setTexture(TextureNames.MISSILE_RING_RED).setSize(240,240).setPos(new egret.Point(120,Main.UPPER_Y)).setVelocity(0,20).addHandler(new TickEventHandler(function(e){e.rotate(a?9:-9)}));n.addToStage();var r=(new RoundMissile).setTexture(TextureNames.MISSILE_RING_RED).setSize(240,240).setPos(new egret.Point(960,Main.UPPER_Y)).setVelocity(0,20).addHandler(new TickEventHandler(function(e){e.rotate(a?18:-18)}));r.addToStage();for(var s=function(e){var i=(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(0).setPos(t.getPos(new egret.Point(n.getX(),n.getY()+n.getWidth()/2),new egret.Point(r.getX(),r.getY()+r.getWidth()/2),e,8)).addHandler(new TickEventHandler(function(i){var s=n.getX()+n.getWidth()/2*Math.sin(MyUtils.ang2rad((a?9:-9)*n.getLife())),o=n.getY()+n.getWidth()/2*Math.cos(MyUtils.ang2rad((a?9:-9)*n.getLife())),l=r.getX()+r.getWidth()/2*Math.sin(MyUtils.ang2rad((a?18:-18)*r.getLife())),c=r.getY()+r.getWidth()/2*Math.cos(MyUtils.ang2rad((a?18:-18)*r.getLife())),u=t.getPos(new egret.Point(s,o),new egret.Point(l,c),e,8),h=u.x-i.getX(),d=u.y-i.getY();i.setVelocity(h,d)})).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.BOTTOM&&e.setDead()}));i.addToStage()},o=0;9>o;o++)s(o);for(var l=function(e){var i=(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(0).setPos(t.getPos(new egret.Point(n.getX(),n.getY()-n.getWidth()/2),new egret.Point(r.getX(),r.getY()-r.getWidth()/2),e,8)).addHandler(new TickEventHandler(function(i){var s=n.getX()-n.getWidth()/2*Math.sin(MyUtils.ang2rad((a?9:-9)*n.getLife())),o=n.getY()-n.getWidth()/2*Math.cos(MyUtils.ang2rad((a?9:-9)*n.getLife())),l=r.getX()-r.getWidth()/2*Math.sin(MyUtils.ang2rad((a?18:-18)*r.getLife())),c=r.getY()-r.getWidth()/2*Math.cos(MyUtils.ang2rad((a?18:-18)*r.getLife())),u=t.getPos(new egret.Point(s,o),new egret.Point(l,c),e,8),h=u.x-i.getX(),d=u.y-i.getY();i.setVelocity(h,d)})).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.BOTTOM&&e.setDead()}));i.addToStage()},o=0;9>o;o++)l(o)}).setFreq(2500))},t.getPos=function(e,t,i,a){var n=e.x*(1-i/a)+t.x*i/a,r=e.y*(1-i/a)+t.y*i/a;return new egret.Point(n,r)},t}(StageBase);__reflect(CEXS6.prototype,"CEXS6");var Test=function(e){function t(){return e.call(this,"test",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,900),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(15,120).setTexture(TextureNames.MISSILE_LEAF).setTotalVelocity(30)).setFreq(200).setStartAngle(0).setStep(45).setNumber(8).setPeriod(-20)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,30).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(58).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-5)}).setTriggerTimes(10))).setStartAngle(0).setNumber(10).setStep(36).setFreq(300).setPeriod(10))},t}(StageBase);__reflect(Test.prototype,"Test");var C1S1H=function(e){function t(){return e.call(this,"c1s1h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.2*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new Sniper(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(18)).setNumber(7).setStep(15).setDiv(1).setFreq(300)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL3).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(30))).setStartAngle(0).setNumber(24).setStep(7.5).setFreq(1200));var i=new egret.Point(.4*Main.X,300),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(i);a.addLogic(new Sniper(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(18)).setNumber(7).setStep(15).setDiv(1).setFreq(300)),a.addLogic(new RandomShooter(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(20)).setFreq(50).setStartAngle(45).setEndAngle(135).setExtraVelocity(10));var n=new egret.Point(.6*Main.X,300),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(n);r.addLogic(new Sniper(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(18)).setNumber(7).setStep(15).setDiv(1).setFreq(300)),r.addLogic(new RandomShooter(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(20)).setFreq(50).setStartAngle(45).setEndAngle(135).setExtraVelocity(10));var s=new egret.Point(.8*Main.X,300),o=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(s);o.addLogic(new Sniper(o,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(18)).setNumber(7).setStep(15).setDiv(1).setFreq(300)),o.addLogic(new Scatter(o,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL3).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(30))).setStartAngle(0).setNumber(24).setStep(7.5).setFreq(1200))},t}(StageTutorial);__reflect(C1S1H.prototype,"C1S1H");var C1S2H=function(e){function t(){return e.call(this,"c1s2h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setFreq(400).setStartAngle(45).setStep(9).setNumber(11));var i=new egret.Point(108,420),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120);a.addLogic(new AroundPoint(a,i,2e3,50).randomTheta()),a.addLogic(new Sniper(a,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(200).setDelay(1e3)),a.addLogic(new RandomShooter(a,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setEndAngle(360).setNumber(8).setExtraVelocity(20));var n=new egret.Point(324,360),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120);r.addLogic(new AroundPoint(r,n,2e3,50).randomTheta()),r.addLogic(new Sniper(r,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(200).setDelay(1e3)),r.addLogic(new RandomShooter(r,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setEndAngle(360).setNumber(8).setExtraVelocity(20));var s=new egret.Point(756,360),o=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120);o.addLogic(new AroundPoint(o,s,2e3,50).setClockwise(!1).randomTheta()),o.addLogic(new Sniper(o,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(200).setDelay(1e3)),o.addLogic(new RandomShooter(o,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setEndAngle(360).setNumber(8).setExtraVelocity(20));var l=new egret.Point(972,420),c=LauncherFactory.texturedLauncher(TextureNames.FLOWER3,80,120);c.addLogic(new AroundPoint(c,l,2e3,50).setClockwise(!1).randomTheta()),c.addLogic(new Sniper(c,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(20))).setFreq(200).setDelay(1e3)),c.addLogic(new RandomShooter(c,(new RoundMissile).setTexture(TextureNames.MISSILE_LIANZI).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setEndAngle(360).setNumber(8).setExtraVelocity(20))},t}(StageBase);__reflect(C1S2H.prototype,"C1S2H");var C1S3H=function(e){function t(){return e.call(this,"c1s3h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new AroundPoint(t,new egret.Point(540,630),2e3,30).setTheta(0).setDelay(1e4)),t.addLogic(new RandomShooter(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(10)).setFreq(250).setStartAngle(0).setEndAngle(360).setNumber(36).setExtraVelocity(20)),t.addLogic(new Sniper(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setSize(256,256).setBottomLayer(!0).setTotalVelocity(16).addHandler(new TickEventHandler(function(e){e.rotate(-9)}).setTriggerTimes(100))).setNumber(1).setFreq(2e3)),t.addLogic(new Sniper(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setSize(256,256).setBottomLayer(!0).setTotalVelocity(16).addHandler(new TickEventHandler(function(e){e.rotate(-9)}).setTriggerTimes(100))).setNumber(1).setFreq(2e3).setDelay(9e3));var i=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);i.addLogic(new AroundLauncher(i,t,5e3,240).setTheta(0)),i.addLogic(new Sniper(i,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(9).setStep(40).setDiv(1).setFreq(300));
var a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);a.addLogic(new AroundLauncher(a,t,5e3,240).setTheta(2/3*Math.PI)),a.addLogic(new Sniper(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(9).setStep(40).setDiv(1).setFreq(300));var n=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90);n.addLogic(new AroundLauncher(n,t,5e3,240).setTheta(4/3*Math.PI)),n.addLogic(new Sniper(n,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(24)).setNumber(9).setStep(40).setDiv(1).setFreq(300));var r=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);r.addLogic(new AroundLauncher(r,t,5e3,240).setTheta(1/3*Math.PI).setClockwise(!1)),r.addLogic(new Sniper(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(10).setStep(36).setDiv(1).setFreq(300));var s=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);s.addLogic(new AroundLauncher(s,t,5e3,240).setTheta(1*Math.PI).setClockwise(!1)),s.addLogic(new Sniper(s,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(10).setStep(36).setDiv(1).setFreq(300));var o=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90);o.addLogic(new AroundLauncher(o,t,5e3,240).setTheta(5/3*Math.PI).setClockwise(!1)),o.addLogic(new Sniper(o,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(24)).setNumber(10).setStep(36).setDiv(1).setFreq(300))},t}(StageBase);__reflect(C1S3H.prototype,"C1S3H");var C1S4H=function(e){function t(){return e.call(this,"c1s4h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,690),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,160,120).setInitialPos(e);t.addLogic(new CustomShooter(t,function(e){for(var t=function(t){for(var i=2*Math.random()*Math.PI,a=0;48>a;a++){var n=24+16*t+.01,r=2*a*Math.PI/48+i,s=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(n*Math.cos(r),n*Math.sin(r)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-(3+2*t))}).setTriggerTimes(8)).addHandler(new TickEventHandler(function(e){var t=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(20*Math.cos(t),20*Math.sin(t))}).setTriggerTimes(1).setStartTicks(20)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(20).setStartTicks(20));s.addToStage()}},i=0;4>=i;i++)t(i)}).setFreq(1600)),t.addLogic(new CustomShooter(t,function(e){for(var t=function(t){for(var i=2*Math.random()*Math.PI,a=function(a){var n=32+16*t+.01,r=2*a*Math.PI/72+i,s=(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setPos(e.getPos()).setVelocity(n*Math.cos(r),n*Math.sin(r)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-(4+2*t))}).setTriggerTimes(8)).addHandler(new TickEventHandler(function(e){var i=r+(Math.random()-.5)*Math.PI,a=12+4*t;e.setVelocity(a*Math.cos(i),a*Math.sin(i))}).setTriggerTimes(1).setStartTicks(20));s.addToStage()},n=0;72>n;n++)a(n)},i=0;4>=i;i++)t(i)}).setFreq(1600))},t}(StageBase);__reflect(C1S4H.prototype,"C1S4H");var C1S5H=function(e){function t(){return e.call(this,"c1s5h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(200).setStartAngle(0).setStep(30).setNumber(12).setPeriod(-10)),t.addLogic(new RandomShooter(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setTotalVelocity(10)).setFreq(900).setStartAngle(0).setEndAngle(360).setNumber(48).setExtraVelocity(20));var i=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(new egret.Point(270,540));i.addLogic(new CustomPath(i,function(e){return 36>e%72?new egret.Point(240+300*Math.random(),120*Math.random()+480):new egret.Point(840-300*Math.random(),120*Math.random()+480)}).setFreq(1800).resetPos(!1)),i.addLogic(new CustomShooter(i,function(e){var t=MissileUtils.getSniperAngle(e.getPos()),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(45*Math.cos(t),45*Math.sin(t));i.addToStage();for(var a=1;10>=a;a++)for(var n=0;10>=n;n++){var t=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(3)*a*(1-.2*n),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(.01*Math.cos(t),.01*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(45)}).setStartTicks(2*a).setTriggerTimes(1));i.addToStage()}}).setFreq(1800));var a=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90).setInitialPos(new egret.Point(810,540));a.addLogic(new CustomPath(a,function(e){return e%72>=36?new egret.Point(240+300*Math.random(),120*Math.random()+480):new egret.Point(840-300*Math.random(),120*Math.random()+480)}).setFreq(1800).resetPos(!1)),a.addLogic(new CustomShooter(a,function(e){var t=MissileUtils.getSniperAngle(e.getPos()),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setPos(e.getPos()).setVelocity(45*Math.cos(t),45*Math.sin(t));i.addToStage();for(var a=1;10>=a;a++)for(var n=0;10>=n;n++){var t=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(3)*a*(1-.2*n),i=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setPos(e.getPos()).setVelocity(.01*Math.cos(t),.01*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(45)}).setStartTicks(2*a).setTriggerTimes(1));i.addToStage()}}).setFreq(1800).setDelay(9e3))},t}(StageBase);__reflect(C1S5H.prototype,"C1S5H");var C1S6H=function(e){function t(){return e.call(this,"c1s6h",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,240,270).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(150).setStartAngle(0).setStep(60).setNumber(6).setPeriod(12)),t.addLogic(new CustomShooter(t,function(e){for(var t=MyUtils.ang2rad(30+30*Math.random()),i=function(i){var a=20+10*i,n=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER1).setPos(e.getPos()).setVelocity(a*Math.cos(t),a*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-a/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;24>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(15*t+4*Math.random()-2),a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(40*Math.cos(i),40*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(40));a.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1));n.addToStage()},a=0;4>a;a++)i(a)}).setFreq(1e3)),t.addLogic(new CustomShooter(t,function(e){for(var t=MyUtils.ang2rad(120+30*Math.random()),i=function(i){var a=20+10*i,n=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER2).setPos(e.getPos()).setVelocity(a*Math.cos(t),a*Math.sin(t)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-a/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=2*Math.random()*Math.PI,i=0;24>i;i++){var a=t+MyUtils.ang2rad(15*i+4*Math.random()-2),n=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setPos(e.getPos()).setVelocity(40*Math.cos(a),40*Math.sin(a)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-.5)}).setTriggerTimes(40));n.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1));n.addToStage()},a=0;4>a;a++)i(a)}).setFreq(1e3).setDelay(500))},t}(StageBase);__reflect(C1S6H.prototype,"C1S6H");var C1S7H=function(e){function t(){return e.call(this,"c1s7h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),i=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,250,200).setInitialPos(e);i.addLogic(new Flash(i,240,840,480,720).setFreq(2e3).setDelay(1950)),i.addLogic(new RandomShooter(i,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL1).setSize(30,36).setTotalVelocity(16)).setFreq(400).setStartAngle(0).setEndAngle(360).setNumber(8).setExtraVelocity(8)),i.addLogic(new RandomShooter(i,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL2).setSize(30,36).setTotalVelocity(12)).setFreq(400).setStartAngle(0).setEndAngle(360).setNumber(10).setExtraVelocity(8)),i.addLogic(new RandomShooter(i,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL3).setSize(30,36).setTotalVelocity(8)).setFreq(400).setStartAngle(0).setEndAngle(360).setNumber(12).setExtraVelocity(8)),i.addLogic(new CustomShooter(i,function(e){for(var i=2*Math.PI*Math.random(),a=t.randomTexture(),n=function(n){for(var r=12+6*n,s=0;7>s;s++){var o=(new RoundMissile).setSize(32,32).setTexture(a).setPos(e.getPos()).setVelocity(r*Math.cos(i+s*Math.PI/12),r*Math.sin(i+s*Math.PI/12)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-r/20)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){var i=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(45*Math.cos(i),45*Math.sin(i)),e.setTexture(t.nextTexture(e.getTexture()))}).setStartTicks(20).setTriggerTimes(1)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1.5)}).setStartTicks(20).setTriggerTimes(30)).addHandler(new TickEventHandler(function(e){var i=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(30*Math.cos(i),30*Math.sin(i)),e.setTexture(t.nextTexture(e.getTexture()))}).setStartTicks(50).setTriggerTimes(1));o.addToStage()}},r=0;3>r;r++)n(r)}).setFreq(400).setDelay(2e3))},t.randomTexture=function(){var e=Math.random();return 1/3>e?TextureNames.MISSILE_RED:2/3>e?TextureNames.MISSILE_BLUE:TextureNames.MISSILE_GREEN},t.nextTexture=function(e){return e==TextureNames.MISSILE_RED?TextureNames.MISSILE_BLUE:e==TextureNames.MISSILE_BLUE?TextureNames.MISSILE_GREEN:TextureNames.MISSILE_RED},t}(StageBase);__reflect(C1S7H.prototype,"C1S7H");var C2S1H=function(e){function t(){return e.call(this,"c2s1h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setFreq(200).setStartAngle(0).setStep(15).setNumber(24).setPeriod(-72)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(20))).setDelay(1200).setStartAngle(0).setNumber(48).setStep(7.5).setFreq(400)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL3).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+2)}).setTriggerTimes(20))).setDelay(1e4).setFreq(100).setStartAngle(30).setStep(60).setNumber(6).setPeriod(6))},t}(StageBase);__reflect(C2S1H.prototype,"C2S1H");var C2S2H=function(e){function t(){return e.call(this,"c2s2h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,540),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){for(var t=0;18>t;t++){var i=t/18*2*Math.PI,a=(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setPos(e.getPos()).setVelocity(e.getVelocityX(),e.getVelocityY()).addVelocity(5*Math.cos(i),5*Math.sin(i));a.addToStage()}e.setDead()}).setStartTicks(1).setTriggerTimes(1))).setFreq(500).setStartAngle(0).setStep(60).setNumber(6).setPeriod(-5*Math.E)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){var t=e.getDirection()+MyUtils.ang2rad(5),i=e.getDirection()-MyUtils.ang2rad(5),a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(15*Math.cos(t),15*Math.sin(t));a.addToStage();var n=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(15*Math.cos(i),15*Math.sin(i));n.addToStage()}).setStartTicks(1).setTriggerTimes(1))).setFreq(250).setStartAngle(30).setStep(60).setNumber(6).setPeriod(-5*Math.E))},t}(StageBase);__reflect(C2S2H.prototype,"C2S2H");var C2S3H=function(e){function t(){return e.call(this,"c2s3h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL3).setTotalVelocity(15).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge(),i=MyUtils.createReasonablePos(e.getPos());t==Side.LEFT||t==Side.RIGHT?(e.setPos(i),e.setVelocityX(-e.getVelocityX()),e.setTotalVelocity(12),e.setTexture(TextureNames.MISSILE_PETAL1)):t==Side.TOP?(e.setPos(i),e.setVelocityY(-e.getVelocityY()),e.setTotalVelocity(12),e.setTexture(TextureNames.MISSILE_PETAL1)):e.setDead()}))).setFreq(50).setStartAngle(0).setNumber(1).setPeriod(Math.E)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(12)).setFreq(400).setStartAngle(0).setStep(22.5).setNumber(16).setPeriod(-10*Math.PI))},t}(StageBase);__reflect(C2S3H.prototype,"C2S3H");var C2S4H=function(e){function t(){return e.call(this,"c2s4h",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setStep(30).setNumber(12).setPeriod(Math.exp(3))),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(10)).setFreq(200).setStartAngle(0).setStep(30).setNumber(12).setPeriod(-Math.exp(3))),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(50).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(30))).setNumber(36).setStep(10).setFreq(600).setDelay(3e3)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(10).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+2)}).setTriggerTimes(30))).setDelay(3300).setStartAngle(5).setNumber(36).setStep(10).setFreq(600)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setSize(128,128).setTotalVelocity(10).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+2)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-2)}).setStartTicks(20).setTriggerTimes(20))).setDelay(1e4).setStartAngle(0).setNumber(24).setStep(15).setFreq(4e3).setPeriod(192))},t}(StageBase);__reflect(C2S4H.prototype,"C2S4H");var C2S5H=function(e){function t(){return e.call(this,"c2s5h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(45).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(30))).setFreq(1e3).setStartAngle(75).setStep(2).setNumber(166)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(45).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1.2)}).setTriggerTimes(25))).setFreq(1e3).setStartAngle(75).setStep(-2).setNumber(16)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(45).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(30))).setFreq(1e3).setDelay(500).setStartAngle(105).setStep(-2).setNumber(166)),t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(45).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1.2)}).setTriggerTimes(25))).setFreq(1e3).setDelay(500).setStartAngle(105).setStep(2).setNumber(16))},t}(StageBase);__reflect(C2S5H.prototype,"C2S5H");var C2S6H=function(e){function t(){return e.call(this,"c2s6h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){var t,i=e.getX()-540,a=e.getY()-600;t=0==i?a>=0?Math.PI/2:-Math.PI/2:i>0?Math.atan(a/i):Math.atan(a/i)+Math.PI,t-=MyUtils.ang2rad(90),e.addVelocity(.5*Math.cos(t),.5*Math.sin(t))}))).setNumber(6).setStartAngle(30).setStep(60).setPeriod(Math.PI).setFreq(50)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){var t,i=e.getX()-540,a=e.getY()-600;t=0==i?a>=0?Math.PI/2:-Math.PI/2:i>0?Math.atan(a/i):Math.atan(a/i)+Math.PI,t+=MyUtils.ang2rad(90),e.addVelocity(.5*Math.cos(t),.5*Math.sin(t))}))).setNumber(6).setStartAngle(30).setStep(60).setPeriod(-Math.PI).setFreq(50)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20.01).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setStartTicks(30))).setNumber(72).setStep(5).setFreq(500).setPeriod(108))},t}(StageBase);__reflect(C2S6H.prototype,"C2S6H");var C2S7H=function(e){function t(){return e.call(this,"c2s7h",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,200,200).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(18)).setFreq(200).setStartAngle(-30).setStep(12).setNumber(21).setPeriod(4.5)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL2).setSize(30,36).setTotalVelocity(25)).setFreq(150).setDelay(4e3).setStartAngle(0).setStep(9).setNumber(6).setPeriod(-1.5)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setSize(256,256).setBottomLayer(!0).setTotalVelocity(16).addHandler(new TickEventHandler(function(e){e.rotate(9)}).setTriggerTimes(100))).setFreq(400).setDelay(8e3).setStartAngle(0).setStep(20).setNumber(2).setPeriod(-2.5)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(14)).setFreq(100).setDelay(12e3).setStartAngle(0).setStep(5).setNumber(4).setPeriod(3)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setTexture(TextureNames.MISSILE_PETAL1).setSize(30,36).setTotalVelocity(30)).setFreq(150).setDelay(16e3).setStartAngle(0).setStep(45).setNumber(9).setPeriod(-4))},t}(StageBase);__reflect(C2S7H.prototype,"C2S7H");var C3S1H=function(e){function t(){return e.call(this,"c3s1h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setTotalVelocity(15).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.LEFT?e.setPosX(e.getX()+Main.X):t==Side.RIGHT?e.setPosX(e.getX()-Main.X):e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(8).setExtraVelocity(5)),e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setRadius(18).setTotalVelocity(20).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();if(t==Side.LEFT)e.setPosX(e.getX()+Main.X);else if(t==Side.RIGHT)e.setPosX(e.getX()-Main.X);else if(t==Side.BOTTOM){var i=(1+Math.random())*Math.PI,a=(new RoundMissile).setPos(MyUtils.createReasonablePos(e.getPos())).setVelocity(8*Math.cos(i),8*Math.sin(i)).setTexture(TextureNames.MISSILE_STANDARD).setSize(36,36).addHandler(new TickEventHandler(function(e){e.setDead()}).setStartTicks(90).setTriggerTimes(1));a.addToStage(),e.setDead()}else e.setDead()}))).setFreq(250).setStartAngle(85).setEndAngle(95).setNumber(4).setExtraVelocity(10))},t}(StageBase);__reflect(C3S1H.prototype,"C3S1H");var C3S2H=function(e){function t(){return e.call(this,"c3s2h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_HAIL).setTotalVelocity(0).addHandler(new TickEventHandler(function(e){var t=e.getVelocity()+2*Math.random();t=Math.min(t,48),e.setTotalVelocity(t)}))).setFreq(50).setStartAngle(85).setEndAngle(95).setNumber(3))},t}(StageBase);__reflect(C3S2H.prototype,"C3S2H");var C3S3H=function(e){function t(){return e.call(this,"c3s3h",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setTotalVelocity(10).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.LEFT?e.setPosX(e.getX()+Main.X):t==Side.RIGHT?e.setPosX(e.getX()-Main.X):e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(6).setExtraVelocity(5));var t=new egret.Point(540,600),i=LauncherFactory.normalLauncher().setInitialPos(t);i.addLogic(new Scatter(i,(new RoundMissile).setSize(128,128).setTexture(TextureNames.MISSILE_GREEN).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;24>t;t++){var i=2*Math.random()*Math.PI,a=6+6*Math.random(),n=(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setPos(e.getPos()).setVelocity(a*Math.cos(i),a*Math.sin(i));n.addToStage()}e.setDead()}).setStartTicks(40).setTriggerTimes(1))).setNumber(12).setStep(30).setFreq(4e3)),i.addLogic(new Scatter(i,(new RoundMissile).setSize(128,128).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1.5)}).setTriggerTimes(20)).addHandler(new TickEventHandler(function(e){for(var t=0;24>t;t++){var i=2*Math.random()*Math.PI,a=6+6*Math.random(),n=(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setPos(e.getPos()).setVelocity(a*Math.cos(i),a*Math.sin(i));n.addToStage()}e.setDead()}).setStartTicks(40).setTriggerTimes(1))).setDelay(2e3).setNumber(12).setStep(30).setFreq(4e3))},t}(StageBase);__reflect(C3S3H.prototype,"C3S3H");var C3S4H=function(e){function t(){return e.call(this,"c3s4h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomShooter(e,function(e){for(var t=0;t++<2;){var i=MissileUtils.createEdgePoint(),a=20+10*Math.random(),n=0;240==i.y?n=90:1680==i.y?n=270:1080==i.x&&(n=180),n+=180*Math.random()-90,n=MyUtils.ang2rad(n);var r=(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setSize(36,36).setPos(i).setVelocity(a*Math.cos(n),a*Math.sin(n));r.addToStage()}}).setFreq(100)),e.addLogic(new CustomShooter(e,function(e){for(var t=0;t++<6;){var i=MissileUtils.createEdgePoint(),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_BLUE).setPos(i).addHandler(new TickEventHandler(function(e){var t=540-e.getX(),i=900-e.getY(),a=Math.sqrt(t*t+i*i);return 8>a?void e.setDead():(e.setVelocity(15*t/a,15*i/a),void e.addVelocity(.05*i,-.05*t))}));a.addToStage()}}).setFreq(100))},t}(StageBase);__reflect(C3S4H.prototype,"C3S4H");var C3S5H=function(e){function t(){return e.call(this,"c3s5h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(10)).setSide(Side.LEFT).setFreq(500).setStartAngle(0).setEndAngle(0).setNumber(6).setExtraVelocity(10)),e.addLogic(new SideShooter(e,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(10)).setSide(Side.RIGHT).setFreq(500).setStartAngle(180).setEndAngle(180).setNumber(6).setExtraVelocity(10));var t=new egret.Point(540,600),i=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,120,90).setInitialPos(t);i.addLogic(new RandomShooter(i,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL3).setTotalVelocity(20).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.TOP?(e.setPosY(Main.UPPER_Y),e.setVelocityX(0),e.setVelocityY(10+10*Math.random())):e.setDead()}))).setNumber(5).setFreq(250).setStartAngle(180).setEndAngle(360).setExtraVelocity(20))},t}(StageBase);__reflect(C3S5H.prototype,"C3S5H");var C3S6H=function(e){function t(){return e.call(this,"c3s6h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setSize(36,36).setTotalVelocity(20).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();if(t==Side.LEFT)e.setPosX(e.getX()+Main.X);else if(t==Side.RIGHT)e.setPosX(e.getX()-Main.X);else if(t==Side.BOTTOM){var i=(1+Math.random())*Math.PI,a=(new RoundMissile).setPos(MyUtils.createReasonablePos(e.getPos())).setVelocity(8*Math.cos(i),8*Math.sin(i)).setTexture(TextureNames.MISSILE_STANDARD).setSize(36,36).addHandler(new TickEventHandler(function(e){e.setDead()}).setStartTicks(90).setTriggerTimes(1));a.addToStage(),e.setDead()}else e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(2).setExtraVelocity(10)),e.addLogic(new CustomShooter(e,function(e){var i=t.initRandomMissile();i.addToStage()}).setFreq(250))},t.initRandomMissile=function(){var e=3*Math.random(),t=null;return 1>=e?t=(new EllipticalMissile).setSize(120,90).setTexture(TextureNames.FLOWER1).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,10+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;9>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(40*t),a=(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setPos(e.getPos()).setVelocity(10*Math.cos(i),10*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+.5)}).setTriggerTimes(40));a.addToStage()}e.setDead()}).setStartTicks(30).setTriggerTimes(1)):2>=e?t=(new EllipticalMissile).setSize(80,120).setTexture(TextureNames.FLOWER3).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,15+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;12>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(30*t),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_LIANZI).setPos(e.getPos()).setVelocity(40*Math.cos(i),40*Math.sin(i)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(30));a.addToStage()}e.setDead()}).setStartTicks(20).setTriggerTimes(1)):3>=e&&(t=(new EllipticalMissile).setSize(90,100).setTexture(TextureNames.FLOWER8).setPos(new egret.Point(Main.X*Math.random(),Main.UPPER_Y)).setVelocity(0,5+10*Math.random()).addHandler(new TickEventHandler(function(e){for(var t=0;18>t;t++){var i=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(20*t),a=(new RoundMissile).setRadius(12).setTexture(TextureNames.MISSILE_PETAL4).setPos(e.getPos()).setVelocity(15*Math.cos(i),15*Math.sin(i));a.addToStage()}e.setDead()}).setStartTicks(40).setTriggerTimes(1))),t},t}(StageBase);__reflect(C3S6H.prototype,"C3S6H");var C3S7H=function(e){function t(){return e.call(this,"c3s7h",25)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new CustomPath(e,function(e){return 5>e%10?new egret.Point(90+450*Math.random(),180*Math.random()+Main.UPPER_Y):new egret.Point(990-450*Math.random(),180*Math.random()+Main.UPPER_Y)}).setFreq(250)),e.addLogic(new Scatter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_RING_RED).setSize(600,600).setTotalVelocity(30).addHandler(new TickEventHandler(function(e){var t=Math.max(e.getWidth()-8,150);e.resize(t,t),e.rotate(9)}).setTriggerTimes(100)).setBottomLayer(!0)).setFreq(250).setStartAngle(90).setNumber(1)),e.addLogic(new Scatter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_RED).setTotalVelocity(20)).setFreq(250).setStartAngle(0).setStep(11.25).setNumber(32));var t=LauncherFactory.normalLauncher();t.addLogic(new CustomShooter(t,function(e){for(var t=0;9>t;t++){var i=(new RoundMissile).setSize(64,64).setTexture(TextureNames.MISSILE_STANDARD).setPos(new egret.Point(60+120*t,Main.UPPER_Y)).setVelocity(0,10).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+2)}).setTriggerTimes(30));i.addToStage()}}).setDelay(5e3).setFreq(5e3))},t}(StageBase);__reflect(C3S7H.prototype,"C3S7H");var Tutorial1=function(e){function t(){return e.call(this,"tut1",10)||this}return __extends(t,e),t.prototype.initEmitters=function(){},t}(StageTutorial);__reflect(Tutorial1.prototype,"Tutorial1");var Tutorial2=function(e){function t(){return e.call(this,"tut2",10)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.5*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setFreq(400).setStartAngle(0).setStep(4).setNumber(90))},t}(StageTutorial);__reflect(Tutorial2.prototype,"Tutorial2");var Tutorial3=function(e){function t(){return e.call(this,"tut3",10)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.5*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new Scatter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setFreq(500).setStartAngle(45).setStep(15).setNumber(7))},t}(StageTutorial);__reflect(Tutorial3.prototype,"Tutorial3");var Tutorial4=function(e){function t(){return e.call(this,"tut4",10)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.5*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new RandomShooter(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15)).setNumber(1).setStartAngle(45).setEndAngle(135).setFreq(200))},t}(StageTutorial);__reflect(Tutorial4.prototype,"Tutorial4");
var Tutorial5=function(e){function t(){return e.call(this,"tut5",10)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(.5*Main.X,300),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(e);t.addLogic(new Sniper(t,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(20)).setFreq(200))},t}(StageTutorial);__reflect(Tutorial5.prototype,"Tutorial5");var Tutorial6=function(e){function t(){return e.call(this,"tut6",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new Flash(e,0,Main.X,Main.UPPER_Y,.5*Main.Y).setFreq(200)),e.addLogic(new Scatter(e,(new RoundMissile).setTotalVelocity(15)).setFreq(200).setStartAngle(0).setStep(15).setNumber(24)),e.addLogic(new SideShooter(e,(new RoundMissile).setSize(256,256).setTexture(TextureNames.MISSILE_RING).setTotalVelocity(15).setBottomLayer(!0).addHandler(new TickEventHandler(function(e){e.rotate(-9)}).setTriggerTimes(100))).setFreq(800).setStartAngle(90).setEndAngle(90))},t}(StageTutorial);__reflect(Tutorial6.prototype,"Tutorial6");var Unused2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,900),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(15,120).setTexture(TextureNames.MISSILE_LEAF).setTotalVelocity(30)).setFreq(200).setStartAngle(0).setStep(45).setNumber(8).setPeriod(-20)),t.addLogic(new ScatterRotate(t,(new EllipticalMissile).setSize(30,30).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(58).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-5)}).setTriggerTimes(10))).setStartAngle(0).setNumber(10).setStep(36).setFreq(300).setPeriod(10))},t}(StageBase);__reflect(Unused2.prototype,"Unused2");var Unused_Rainwind=function(e){function t(){return e.call(this,"unused3_3",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=LauncherFactory.normalLauncher();e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.addVelocity(4*Math.random()-2,0)})).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();t==Side.LEFT?e.setPosX(e.getX()+Main.X):t==Side.RIGHT?e.setPosX(e.getX()-Main.X):e.setDead()}))).setFreq(250).setStartAngle(75).setEndAngle(105).setNumber(5).setExtraVelocity(5)),e.addLogic(new SideShooter(e,(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setSize(36,36).setTotalVelocity(20).addHandler(new TickEventHandler(function(e){e.addVelocity(8*Math.random()-4,0)})).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge();if(t==Side.LEFT)e.setPosX(e.getX()+Main.X);else if(t==Side.RIGHT)e.setPosX(e.getX()-Main.X);else if(t==Side.BOTTOM){var i=(1+Math.random())*Math.PI,a=(new RoundMissile).setPos(MyUtils.createReasonablePos(e.getPos())).setVelocity(8*Math.cos(i),8*Math.sin(i)).setTexture(TextureNames.MISSILE_STANDARD).setSize(36,36).addHandler(new TickEventHandler(function(e){e.setDead()}).setStartTicks(90).setTriggerTimes(1));a.addToStage(),e.setDead()}else e.setDead()}))).setFreq(250).setStartAngle(85).setEndAngle(95).setNumber(2))},t}(StageBase);__reflect(Unused_Rainwind.prototype,"Unused_Rainwind");var Unused1=function(e){function t(){return e.call(this,"unused1_4",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,720),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(300).setStartAngle(0).setStep(90).setNumber(4).setPeriod(15)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(300).setStartAngle(0).setStep(90).setNumber(4).setPeriod(-15));var i=new egret.Point(360,720),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(i);a.addLogic(new ScatterRotate(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(15)).addHandler(new TickEventHandler(function(e){var t=MissileUtils.getSniperAngle(e.getPos());e.setVelocity(10*Math.cos(t),10*Math.sin(t))}).setTriggerTimes(1).setStartTicks(60)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+.5)}).setTriggerTimes(20).setStartTicks(60))).setFreq(300).setStartAngle(0).setStep(120).setNumber(3).setPeriod(4));var n=new egret.Point(720,720),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90).setInitialPos(n);r.addLogic(new ScatterRotate(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(15)).addHandler(new TickEventHandler(function(e){var t,i=n.x-e.getX(),a=n.y-e.getY();t=0==i?a>=0?Math.PI/2:-Math.PI/2:i>0?Math.atan(a/i):Math.atan(a/i)+Math.PI,t+=Math.PI/4*(2*Math.random()-1),e.setVelocity(10*Math.cos(t),10*Math.sin(t))}).setTriggerTimes(1).setStartTicks(60)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+.5)}).setTriggerTimes(20).setStartTicks(60))).setFreq(300).setStartAngle(0).setStep(120).setNumber(3).setPeriod(-4))},t}(StageBase);__reflect(Unused1.prototype,"Unused1");var Unused1H=function(e){function t(){return e.call(this,"unused1_4h",20)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,720),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER8,150,170).setInitialPos(e);t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(150).setStartAngle(0).setStep(60).setNumber(6).setPeriod(12)),t.addLogic(new ScatterRotate(t,(new RoundMissile).setTexture(TextureNames.MISSILE_PETAL4).setTotalVelocity(20)).setFreq(150).setStartAngle(0).setStep(60).setNumber(6).setPeriod(-12)),t.addLogic(new Scatter(t,(new RoundMissile).setTexture(TextureNames.MISSILE_GREEN).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(30))).setDelay(500).setStartAngle(0).setNumber(32).setStep(11.25).setFreq(1e3));var i=new egret.Point(360,720),a=LauncherFactory.texturedLauncher(TextureNames.FLOWER1,120,90).setInitialPos(i);a.addLogic(new ScatterRotate(a,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL2).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(15)).addHandler(new TickEventHandler(function(e){var t=MissileUtils.getSniperAngle(e.getPos())+MyUtils.ang2rad(2)*(2*Math.random()-1);e.setVelocity(10*Math.cos(t),10*Math.sin(t))}).setTriggerTimes(1).setStartTicks(60)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(20).setStartTicks(60))).setFreq(300).setStartAngle(0).setStep(60).setNumber(6).setPeriod(4));var n=new egret.Point(720,720),r=LauncherFactory.texturedLauncher(TextureNames.FLOWER2,120,90).setInitialPos(n);r.addLogic(new ScatterRotate(r,(new EllipticalMissile).setSize(30,36).setTexture(TextureNames.MISSILE_PETAL1).setTotalVelocity(15).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()-1)}).setTriggerTimes(15)).addHandler(new TickEventHandler(function(e){var t,i=n.x-e.getX(),a=n.y-e.getY();t=0==i?a>=0?Math.PI/2:-Math.PI/2:i>0?Math.atan(a/i):Math.atan(a/i)+Math.PI,t+=Math.PI/4*(2*Math.random()-1),e.setVelocity(10*Math.cos(t),10*Math.sin(t))}).setTriggerTimes(1).setStartTicks(60)).addHandler(new TickEventHandler(function(e){e.setTotalVelocity(e.getVelocity()+1)}).setTriggerTimes(20).setStartTicks(60))).setFreq(300).setStartAngle(0).setStep(60).setNumber(6).setPeriod(-4))},t}(StageBase);__reflect(Unused1H.prototype,"Unused1H");var UnusedEX_3=function(e){function t(){return e.call(this,"unused_cexs3",30)||this}return __extends(t,e),t.prototype.initEmitters=function(){var e=new egret.Point(540,600),t=LauncherFactory.texturedLauncher(TextureNames.FLOWER0,160,120).setInitialPos(e);t.addLogic(new CustomShooter(t,function(e){var t=SelfMachine.INSTANCE.currentStage.getCurrentTick(),i=t-t%280;if(!(t%240>120))for(var a=0;6>a;a++){var n=10+10*Math.random(),r=2*Math.random()*Math.PI,s=(new RoundMissile).setTexture(TextureNames.MISSILE_BLUE).setPos(e.getPos()).setVelocity(n*Math.cos(r),n*Math.sin(r)).addHandler(new EdgeEventHandler(function(e){var t=e.getEdge(),i=MyUtils.createReasonablePos(e.getPos());t==Side.LEFT||t==Side.RIGHT?(e.setPos(i),e.setVelocityX(-e.getVelocityX()),e.setTotalVelocity(.8*e.getVelocity())):t==Side.TOP||t==Side.BOTTOM?(e.setPos(i),e.setVelocityY(-e.getVelocityY()),e.setTotalVelocity(.8*e.getVelocity())):e.setDead()})).addHandler(new TickEventHandler(function(e){SelfMachine.INSTANCE.currentStage.getCurrentTick()==i+120&&(e.setTotalVelocity(-.8*e.getVelocity()),e.setTexture(TextureNames.MISSILE_STANDARD))})).addHandler(new TickEventHandler(function(e){if(SelfMachine.INSTANCE.currentStage.getCurrentTick()>=i+120){var t=540-e.getX(),a=600-e.getY(),n=Math.sqrt(t*t+a*a);if(10>=n&&e.getLife()>2)return void e.setDead()}}));s.addToStage()}}).setFreq(200))},t}(StageBase);__reflect(UnusedEX_3.prototype,"UnusedEX_3");